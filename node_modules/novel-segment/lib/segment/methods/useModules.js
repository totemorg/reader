"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function _isIgnoreModules(me, mod, ...argv) {
    return (me.options && me.options.disableModules && me.options.disableModules.includes(mod));
}
exports._isIgnoreModules = _isIgnoreModules;
function _warnIgnoreModules(mod) {
    console.warn(`can't use this mod, because it got disable: ${mod}`);
}
exports._warnIgnoreModules = _warnIgnoreModules;
function useModules(me, mod, ...argv) {
    if (_isIgnoreModules(me, mod, ...argv)) {
        _warnIgnoreModules(mod);
    }
    else {
        // 初始化并注册模块
        let c = mod.init(me, ...argv);
        if (typeof c !== 'undefined') {
            mod = c;
        }
        // @ts-ignore
        me.modules[mod.type].push(mod);
    }
    return me;
}
exports.useModules = useModules;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlTW9kdWxlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInVzZU1vZHVsZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFLQSxTQUFnQixnQkFBZ0IsQ0FBd0IsRUFBSyxFQUFFLEdBQXdDLEVBQUUsR0FBRyxJQUFJO0lBRS9HLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsY0FBYyxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO0FBQzVGLENBQUM7QUFIRCw0Q0FHQztBQUVELFNBQWdCLGtCQUFrQixDQUFDLEdBQUc7SUFFckMsT0FBTyxDQUFDLElBQUksQ0FBQywrQ0FBK0MsR0FBRyxFQUFFLENBQUMsQ0FBQTtBQUNuRSxDQUFDO0FBSEQsZ0RBR0M7QUFFRCxTQUFnQixVQUFVLENBQUksRUFBSyxFQUFFLEdBQXdDLEVBQUUsR0FBRyxJQUFJO0lBRXJGLElBQUksZ0JBQWdCLENBQUMsRUFBUyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxFQUM3QztRQUNDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxDQUFBO0tBQ3ZCO1NBRUQ7UUFDQyxXQUFXO1FBQ1gsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUU5QixJQUFJLE9BQU8sQ0FBQyxLQUFLLFdBQVcsRUFDNUI7WUFDQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1NBQ1I7UUFFRCxhQUFhO1FBQ2IsRUFBRSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQy9CO0lBRUQsT0FBTyxFQUFFLENBQUM7QUFDWCxDQUFDO0FBckJELGdDQXFCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElPcHRpb25zU2VnbWVudCB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCBTZWdtZW50Q29yZSBmcm9tICcuLi9jb3JlJztcbmltcG9ydCB7IElTdWJPcHRpbWl6ZXIgfSBmcm9tICcuLi8uLi9tb2QvT3B0aW1pemVyJztcbmltcG9ydCB7IElTdWJUb2tlbml6ZXIgfSBmcm9tICcuLi8uLi9tb2QvVG9rZW5pemVyJztcblxuZXhwb3J0IGZ1bmN0aW9uIF9pc0lnbm9yZU1vZHVsZXM8VCBleHRlbmRzIFNlZ21lbnRDb3JlPihtZTogVCwgbW9kOiBJU3ViT3B0aW1pemVyIHwgSVN1YlRva2VuaXplciB8IGFueSwgLi4uYXJndilcbntcblx0cmV0dXJuIChtZS5vcHRpb25zICYmIG1lLm9wdGlvbnMuZGlzYWJsZU1vZHVsZXMgJiYgbWUub3B0aW9ucy5kaXNhYmxlTW9kdWxlcy5pbmNsdWRlcyhtb2QpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gX3dhcm5JZ25vcmVNb2R1bGVzKG1vZClcbntcblx0Y29uc29sZS53YXJuKGBjYW4ndCB1c2UgdGhpcyBtb2QsIGJlY2F1c2UgaXQgZ290IGRpc2FibGU6ICR7bW9kfWApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VNb2R1bGVzPFQ+KG1lOiBULCBtb2Q6IElTdWJPcHRpbWl6ZXIgfCBJU3ViVG9rZW5pemVyIHwgYW55LCAuLi5hcmd2KVxue1xuXHRpZiAoX2lzSWdub3JlTW9kdWxlcyhtZSBhcyBhbnksIG1vZCwgLi4uYXJndikpXG5cdHtcblx0XHRfd2Fybklnbm9yZU1vZHVsZXMobW9kKVxuXHR9XG5cdGVsc2Vcblx0e1xuXHRcdC8vIOWIneWni+WMluW5tuazqOWGjOaooeWdl1xuXHRcdGxldCBjID0gbW9kLmluaXQobWUsIC4uLmFyZ3YpO1xuXG5cdFx0aWYgKHR5cGVvZiBjICE9PSAndW5kZWZpbmVkJylcblx0XHR7XG5cdFx0XHRtb2QgPSBjO1xuXHRcdH1cblxuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHRtZS5tb2R1bGVzW21vZC50eXBlXS5wdXNoKG1vZCk7XG5cdH1cblxuXHRyZXR1cm4gbWU7XG59XG4iXX0=