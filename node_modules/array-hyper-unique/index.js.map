{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";AAAA;;GAEG;AAOH;;;;;;;;;;EAUE;AAEF,IAAO,WAAW,CAiHjB;AAjHD,WAAO,aAAW;IAEjB,aAAa;IACb,MAAM,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;IAKnC,aAAa;IACb,SAAgB,WAAW,CAAI,GAAG,GAAmB;QAEpD,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC,EAClB;YACC,OAAO,YAAY,CAAC,GAAG,CAAC,CAAC;SACzB;QAED,OAAO,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7B,CAAC;IARe,yBAAW,cAQ1B,CAAA;IAED,SAAgB,YAAY,CAAI,GAAM,EAAE,UAUpC,EAAE;QAEL,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EACvB;YACC,MAAM,IAAI,SAAS,CAAC,6BAA6B,OAAO,GAAG,GAAG,CAAC,CAAA;SAC/D;QAED,MAAM,EAAE,GAAG,aAAa,CAAC,OAAO,CAAC,CAAC;QAElC,IAAI,OAAO,CAAC,SAAS,EACrB;YACC,IAAI,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC;YAEvB,OAAO,KAAK,EAAE,EACd;gBACC,IAAI,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;gBAErB,IAAI,CAAC,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,GAAG,CAAC,EACxB;oBACC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;iBACrB;aACD;YAED,OAAO,GAAG,CAAC;SACX;QAED,aAAa;QACb,OAAO,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;IACvB,CAAC;IAtCe,0BAAY,eAsC3B,CAAA;IAED,SAAgB,qBAAqB,CAAI,GAAG,GAAmB;QAE9D,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC,EAClB;YACC,OAAO,sBAAsB,CAAC,GAAG,CAAC,CAAC;SACnC;QAED,OAAO,sBAAsB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACvC,CAAC;IARe,mCAAqB,wBAQpC,CAAA;IAED,SAAgB,sBAAsB,CAAI,GAAM,EAAE,UAAuB,EAAE;QAE1E,IAAI,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,EAAE;YACrC,SAAS,EAAE,IAAI;SACf,CAAC,CAAC;QAEH,OAAO,YAAY,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;IAChC,CAAC;IAPe,oCAAsB,yBAOrC,CAAA;IAaD,SAAgB,aAAa,CAAI,UAAuB,EAAE;QAEzD,MAAM,OAAO,GAAG,OAAO,CAAC,OAAO,IAAI,cAAc,CAAC;QAClD,MAAM,MAAM,GAAG,OAAO,CAAC,MAAM,IAAI,IAAI,CAAC;QAEtC,MAAM,EAAE,GAAG,CAAkB,GAAe,EAAE,KAAa,EAAE,GAAM,EAAE,EAAE;YAEtE,IAAI,CAAC,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;YACtD,OAAO,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,MAAM,IAAI,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;QAC/C,CAAC,CAAC;QAEF,OAAO,EAAE,CAAC;IACX,CAAC;IAZe,2BAAa,gBAY5B,CAAA;IAED,SAAgB,cAAc,CAAO,OAAU,EAAE,KAAQ,EAAE,OAAsB,EAAE,OAAsB;QAExG,OAAO,MAAM,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IAC/B,CAAC;IAHe,4BAAc,iBAG7B,CAAA;AAOF,CAAC,EAjHM,WAAW,KAAX,WAAW,QAiHjB;AAID,aAAa;AACb,WAAW,GAAG,WAAW,CAAC,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,WAAW,EAAE,WAAW,EAAE,OAAO,EAAE;IACpG,aAAa;IACb,MAAM,EAAE,OAAO,CAAC,UAAU,CAAC;IAC3B,OAAO,EAAE,WAAW,CAAC,WAAW;CAChC,CAAC,CAAC;AAEH,aAAa;AACb,kBAAe,WAAW,CAAC;AAE3B,aAAa;AACb,MAAM,CAAC,cAAc,CAAC,WAAW,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAElE,aAAa;AACb,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE;IACtC,IACA;QACC,aAAa;QACb,WAAW,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;KAC/C;IACD,OAAO,CAAC,EACR;KAEC;AACF,CAAC,CAAC,CAAC;AAEH,aAAa;AACb,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;AAEzC,iBAAS,WAAW,CAAA;AACpB,uBAAuB","sourcesContent":["/**\n * Created by user on 2018/5/30/030.\n */\n\nimport equals = require('deep-eql');\n\ndeclare function lazy_unique<T extends any[]>(arr: T): T\ndeclare function lazy_unique<T, T1, T2>(a1: T1, a2: T2, ...arr: T[]): Array<T | T1 | T2>\ndeclare function lazy_unique<T>(...arr: Array<T | T[]>): T | (T | T[])[]\n/*\nfunction lazy_unique<T>(...arr: Array<T | T[]>)\n{\n\tif (arr.length > 1)\n\t{\n\t\treturn array_unique(arr);\n\t}\n\n\treturn array_unique(arr[0]);\n}\n*/\n\nmodule lazy_unique\n{\n\t// @ts-ignore\n\tconst equals = require('deep-eql');\n\n\texport function lazy_unique<T extends any[]>(arr: T): T\n\texport function lazy_unique<T, T1, T2>(a1: T1, a2: T2, ...arr: T[]): Array<T | T1 | T2>\n\texport function lazy_unique<T>(...arr: Array<T | T[]>): T | (T | T[])[]\n\t// @ts-ignore\n\texport function lazy_unique<T>(...arr: Array<T | T[]>)\n\t{\n\t\tif (arr.length > 1)\n\t\t{\n\t\t\treturn array_unique(arr);\n\t\t}\n\n\t\treturn array_unique(arr[0]);\n\t}\n\n\texport function array_unique<T>(arr: T, options: {\n\n\t\tchecker?(element: T[keyof T], array: T[keyof T], arr_new?: T, arr_old?: T): boolean,\n\t\tchecker?<R>(element: R[keyof R], array: R[keyof R], arr_new?: R, arr_old?: R): boolean,\n\n\t\toverwrite?: boolean,\n\n\t\tfilter?(v: T[keyof T]): boolean,\n\t\tfilter?<R>(v: R[keyof R]): boolean,\n\n\t} = {}): T\n\t{\n\t\tif (!Array.isArray(arr))\n\t\t{\n\t\t\tthrow new TypeError(`Expected an Array but got ${typeof arr}.`)\n\t\t}\n\n\t\tconst cb = defaultFilter(options);\n\n\t\tif (options.overwrite)\n\t\t{\n\t\t\tlet index = arr.length;\n\n\t\t\twhile (index--)\n\t\t\t{\n\t\t\t\tlet val = arr[index];\n\n\t\t\t\tif (!cb(val, index, arr))\n\t\t\t\t{\n\t\t\t\t\tarr.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\t// @ts-ignore\n\t\treturn arr.filter(cb);\n\t}\n\n\texport function lazy_unique_overwrite<T>(...arr: Array<T | T[]>)\n\t{\n\t\tif (arr.length > 1)\n\t\t{\n\t\t\treturn array_unique_overwrite(arr);\n\t\t}\n\n\t\treturn array_unique_overwrite(arr[0]);\n\t}\n\n\texport function array_unique_overwrite<T>(arr: T, options: IOptions<T> = {}): T\n\t{\n\t\tlet opts = Object.assign({}, options, {\n\t\t\toverwrite: true,\n\t\t});\n\n\t\treturn array_unique(arr, opts);\n\t}\n\n\texport type IOptions<T> = {\n\n\t\tchecker?(element: T[keyof T], array: T[keyof T], arr_new?: T, arr_old?: T): boolean,\n\t\tchecker?<R>(element: R[keyof R], array: R[keyof R], arr_new?: R, arr_old?: R): boolean,\n\n\t\toverwrite?: boolean,\n\n\t\tfilter?(v: T[keyof T]): boolean,\n\t\tfilter?<R>(v: R[keyof R]): boolean,\n\t};\n\n\texport function defaultFilter<T>(options: IOptions<T> = {})\n\t{\n\t\tconst checker = options.checker || defaultChecker;\n\t\tconst filter = options.filter || null;\n\n\t\tconst cb = <K extends any[]>(val: K[keyof K], index: number, arr: K) =>\n\t\t{\n\t\t\tlet i = arr.findIndex(a => checker(a, val, arr, arr));\n\t\t\treturn i == index && (!filter || filter(val));\n\t\t};\n\n\t\treturn cb;\n\t}\n\n\texport function defaultChecker<T, R>(element: T, value: R, arr_new?: Array<T | R>, arr_old?: Array<T | R>): boolean\n\t{\n\t\treturn equals(element, value);\n\t}\n\n\t// @ts-ignore\n\texport declare function equals(a1, a2): boolean;\n\n\t// @ts-ignore\n\texport { lazy_unique as default };\n}\n\nimport array_unique = lazy_unique.array_unique;\n\n// @ts-ignore\nlazy_unique = lazy_unique.lazy_unique = Object.assign(lazy_unique.lazy_unique, lazy_unique, exports, {\n\t// @ts-ignore\n\tequals: require('deep-eql'),\n\tdefault: lazy_unique.lazy_unique,\n});\n\n// @ts-ignore\nexport default lazy_unique;\n\n// @ts-ignore\nObject.defineProperty(lazy_unique, \"__esModule\", { value: true });\n\n// @ts-ignore\nObject.keys(lazy_unique).forEach((k) => {\n\ttry\n\t{\n\t\t// @ts-ignore\n\t\tlazy_unique[k] = Object.freeze(lazy_unique[k]);\n\t}\n\tcatch (e)\n\t{\n\n\t}\n});\n\n// @ts-ignore\nlazy_unique = Object.freeze(lazy_unique);\n// @ts-ignore\nexport = lazy_unique\n//export = lazy_unique;\n"]}