"use strict";
/**
 * Created by user on 2017/12/8/008.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const deepmerge = require("deepmerge");
const util = require("./util");
const uni_string_1 = require("uni-string");
var FullHalfCore;
(function (FullHalfCore) {
    let EnumFullHalfTableType;
    (function (EnumFullHalfTableType) {
        EnumFullHalfTableType[EnumFullHalfTableType["FULL_WIDTH"] = 1] = "FULL_WIDTH";
        EnumFullHalfTableType[EnumFullHalfTableType["HALF_WIDTH"] = 0] = "HALF_WIDTH";
        EnumFullHalfTableType[EnumFullHalfTableType["NO_EXIST"] = -1] = "NO_EXIST";
    })(EnumFullHalfTableType = FullHalfCore.EnumFullHalfTableType || (FullHalfCore.EnumFullHalfTableType = {}));
    FullHalfCore.FULL_WIDTH = 1 /* FULL_WIDTH */;
    FullHalfCore.HALF_WIDTH = 0 /* HALF_WIDTH */;
    FullHalfCore.NO_EXIST = -1 /* NO_EXIST */;
    /**
     * @see https://en.wikipedia.org/wiki/Code_page_437
     */
    let _table = {
        default: {
            from: 0x0020 + 1,
            to: 0x007F - 1,
            values: [0x0020],
        },
        number: [0x0030, 0x0039],
        'A-Z': [0x0041, 0x005A],
        'a-z': [0x0061, 0x007A],
        space: [0x0020],
        slash: {
            values: util.charCodeAt(`/\\`),
        },
        bracket: {
            values: util.charCodeAt(`()[]{}`),
        },
    };
    FullHalfCore.tableDefaultInclude = [
        'number',
        'A-Z',
        'a-z',
        'space',
        'not_default',
    ];
    FullHalfCore.table = [];
    {
        let _keys = FullHalfCore.tableDefaultInclude.slice(0, -1);
        FullHalfCore.table[0] = {};
        FullHalfCore.table[1] = {};
        for (let k in _table) {
            let v = _table[k];
            let r;
            r = fn(v);
            if (r) {
                FullHalfCore.table[0 /* HALF_WIDTH */][k] = r[1];
                FullHalfCore.table[1 /* FULL_WIDTH */][k] = r[0];
            }
        }
        let r = fn(_table.default);
        r[0].not = [];
        r[1].not = [];
        for (let k of _keys) {
            let v = _table[k];
            let r2;
            r2 = fn(v);
            if (r2) {
                r[0].not.push(r2[0]);
                r[1].not.push(r2[1]);
            }
        }
        FullHalfCore.table[0 /* HALF_WIDTH */]['not_default'] = r[1];
        FullHalfCore.table[1 /* FULL_WIDTH */]['not_default'] = r[0];
        //console.log(table);
        function fn(v) {
            let r = [];
            r[0] = {};
            r[1] = {};
            let _skip = true;
            if (Array.isArray(v)) {
                if (v.length == 2) {
                    r[0].from = v[0];
                    r[0].to = v[1];
                }
                else {
                    r[0].values = v;
                }
                _skip = false;
            }
            if (v.from && v.to) {
                r[0].from = v.from;
                r[0].to = v.to;
                _skip = false;
            }
            if (Array.isArray(v.values) && v.values.length) {
                r[0].values = v.values;
                _skip = false;
            }
            if (_skip) {
                return;
            }
            if (r[0].from && r[0].to) {
                r[1].from = toFullWidth(r[0].from);
                r[1].to = toFullWidth(r[0].to);
            }
            if (r[0].values) {
                r[1].values = r[0].values.reduce(function (a, code) {
                    a.push(toFullWidth(code));
                    return a;
                }, []);
            }
            return r;
        }
    }
    function filterTable(data) {
        let _a = [];
        if (data.from && data.to) {
            for (let i = data.from; i <= data.to; i++) {
                _a.push(i);
            }
        }
        if (data.values) {
            _a = _a.concat(data.values);
        }
        if (Array.isArray(data.not) && data.not.length) {
            _a = _a.filter(function (charCode) {
                for (let d of data.not) {
                    if (_chkType(charCode, d)) {
                        return false;
                    }
                }
                return true;
            });
        }
        return _a;
    }
    FullHalfCore.filterTable = filterTable;
    function _chkType(charCode, data) {
        if (data.from && data.to && data.from <= charCode && charCode <= data.to) {
            return true;
        }
        else if (data.values && data.values.includes(charCode)) {
            return true;
        }
    }
    FullHalfCore._chkType = _chkType;
    function chkType(charCode, key, type) {
        let data = FullHalfCore.table[type][key];
        //console.log(charCode, data);
        if (Array.isArray(data.not) && data.not.length) {
            for (let d of data.not) {
                if (_chkType(charCode, d)) {
                    return false;
                }
            }
        }
        if (_chkType(charCode, data)) {
            return true;
        }
    }
    FullHalfCore.chkType = chkType;
    function hasFullHalf(charCode) {
        if (0x0020 <= charCode && charCode < 0x007F) {
            return 0 /* HALF_WIDTH */;
        }
        if (0x3000 === charCode || 0xFF00 < charCode && charCode < 0xFF5F) {
            return 1 /* FULL_WIDTH */;
        }
        return -1 /* NO_EXIST */;
    }
    FullHalfCore.hasFullHalf = hasFullHalf;
    function isFullHalf(charCode) {
        let r = hasFullHalf(charCode);
        if (r === 1 /* FULL_WIDTH */) {
            return true;
        }
        else if (r === 0 /* HALF_WIDTH */) {
            return false;
        }
        else {
            // @todo add more...
        }
        return null;
    }
    FullHalfCore.isFullHalf = isFullHalf;
    function toFullWidth(charCode) {
        if (0x0020 < charCode && charCode < 0x007F) {
            return 0xFF00 + (charCode - 0x0020);
        }
        if (0x0020 === charCode) {
            return 0x3000;
        }
        return charCode;
    }
    FullHalfCore.toFullWidth = toFullWidth;
    function toHalfWidth(charCode) {
        if (0xFF00 < charCode && charCode < 0xFF5F) {
            return 0x0020 + (charCode - 0xFF00);
        }
        if (0x3000 === charCode) {
            return 0x0020;
        }
        return charCode;
    }
    FullHalfCore.toHalfWidth = toHalfWidth;
    function _optionsType(data) {
        if (data) {
            if (typeof data.exists == 'boolean') {
                for (let key in FullHalfCore.table[0]) {
                    if (key.indexOf('default') == 0) {
                        continue;
                    }
                    if (data[key] !== false) {
                        data[key] = data.exists;
                    }
                }
                delete data.exists;
            }
            else {
                if (typeof data.default == 'boolean') {
                    for (let key of FullHalfCore.tableDefaultInclude) {
                        if (data[key] !== false) {
                            data[key] = data.default;
                        }
                    }
                    delete data.default;
                }
                if (typeof data.not_default2 == 'boolean') {
                    data.both = data.space = data.not_default2;
                    delete data.not_default2;
                }
                if (typeof data.both == 'boolean') {
                    data.number = data.eng = data.both;
                    delete data.both;
                }
                if (typeof data.eng == 'boolean') {
                    data['a-z'] = data['A-Z'] = data.eng;
                    delete data.eng;
                }
            }
        }
        return data;
    }
    FullHalfCore._optionsType = _optionsType;
    function process(str, charProcess, options) {
        let ret = [];
        options.skip = _optionsType(options.skip);
        options.only = _optionsType(options.only);
        //console.log(options);
        let _str = Array.isArray(str) ? str : new uni_string_1.default(str);
        for (let char of _str) {
            let _skip;
            // @ts-ignore
            //let charCode = typeof char == 'number' ? char : char.charCodeAt();
            let charCode = typeof char == 'number' ? char : char.codePointAt();
            if (options.only) {
                _skip = true;
                for (let key in options.only) {
                    //console.log(char, charCode, [key], chkType(charCode, key, options.type));
                    if (options.only[key] && chkType(charCode, key, options.type)) {
                        _skip = false;
                        break;
                    }
                }
                //console.log(char, charCode, _skip);
            }
            if (!_skip && options.skip) {
                for (let key in options.skip) {
                    if (options.skip[key] && chkType(charCode, key, options.type)) {
                        _skip = true;
                        break;
                    }
                }
            }
            if (_skip) {
                ret.push(charCode);
                continue;
            }
            ret.push(charProcess(charCode));
        }
        if (options.returnType) {
            return ret;
        }
        //return String.fromCharCode.apply(String, ret);
        return String.fromCodePoint.apply(String, ret);
    }
    FullHalfCore.process = process;
    function factory(charProcessor, type, overwriteOptions) {
        //const deepmerge = require('deepmerge');
        // @ts-ignore
        return (str, options) => {
            options = deepmerge.all([
                {
                //skip: {},
                }, options || {}, overwriteOptions || {}, {
                    type: type,
                },
            ]);
            //console.log(options);
            return process(str, charProcessor, options);
        };
    }
    FullHalfCore.factory = factory;
})(FullHalfCore = exports.FullHalfCore || (exports.FullHalfCore = {}));
exports.EnumFullHalfTableType = FullHalfCore.EnumFullHalfTableType;
let typeOnly = {
    only: {
        number: true,
    },
};
exports.toFullNumber = FullHalfCore.factory(FullHalfCore.toFullWidth, 1 /* FULL_WIDTH */, typeOnly);
exports.toHalfNumber = FullHalfCore.factory(FullHalfCore.toHalfWidth, 0 /* HALF_WIDTH */, typeOnly);
typeOnly = {
    only: {
        eng: true,
    },
};
exports.toFullEnglish = FullHalfCore.factory(FullHalfCore.toFullWidth, 1 /* FULL_WIDTH */, typeOnly);
exports.toHalfEnglish = FullHalfCore.factory(FullHalfCore.toHalfWidth, 0 /* HALF_WIDTH */, typeOnly);
typeOnly = {
    only: {
        default: true,
    },
};
exports.toFullWidth = FullHalfCore.factory(FullHalfCore.toFullWidth, 1 /* FULL_WIDTH */, typeOnly);
exports.toHalfWidth = FullHalfCore.factory(FullHalfCore.toHalfWidth, 0 /* HALF_WIDTH */, typeOnly);
exports.default = exports;
//console.log(toFullEnglish('123abcABCＡＢＣ１２３／＊－＋＝－０］［’；／．+-*/=-09][\'";/.'));
//console.log(toHalfEnglish('123abcABCＡＢＣ１２３／＊－＋＝－０］［’；／．+-*/=-09][\'";/.'));
//console.log(toFullNumber('123abcABCＡＢＣ１２３／＊－＋＝－０］［’；／．+-*/=-09][\'";/.'));
//console.log(toHalfNumber('123abcABCＡＢＣ１２３／＊－＋＝－０］［’；／．+-*/=-09][\'";/.'));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnVsbGhhbGYuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJmdWxsaGFsZi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7O0FBRUgsdUNBQXdDO0FBQ3hDLCtCQUFnQztBQUNoQywyQ0FBaUM7QUFFakMsSUFBaUIsWUFBWSxDQXNpQjVCO0FBdGlCRCxXQUFpQixZQUFZO0lBRTVCLElBQWtCLHFCQUtqQjtJQUxELFdBQWtCLHFCQUFxQjtRQUV0Qyw2RUFBYyxDQUFBO1FBQ2QsNkVBQWMsQ0FBQTtRQUNkLDBFQUFhLENBQUE7SUFDZCxDQUFDLEVBTGlCLHFCQUFxQixHQUFyQixrQ0FBcUIsS0FBckIsa0NBQXFCLFFBS3RDO0lBRVksdUJBQVUscUJBQW1DLENBQUM7SUFDOUMsdUJBQVUscUJBQW1DLENBQUM7SUFFOUMscUJBQVEsb0JBQWlDLENBQUM7SUEyRnZEOztPQUVHO0lBQ0gsSUFBSSxNQUFNLEdBQUc7UUFDWixPQUFPLEVBQUU7WUFDUixJQUFJLEVBQUUsTUFBTSxHQUFHLENBQUM7WUFDaEIsRUFBRSxFQUFFLE1BQU0sR0FBRyxDQUFDO1lBQ2QsTUFBTSxFQUFFLENBQUMsTUFBTSxDQUFDO1NBQ2hCO1FBRUQsTUFBTSxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUV4QixLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3ZCLEtBQUssRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7UUFFdkIsS0FBSyxFQUFFLENBQUMsTUFBTSxDQUFDO1FBRWYsS0FBSyxFQUFFO1lBQ04sTUFBTSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDO1NBQzlCO1FBRUQsT0FBTyxFQUFFO1lBQ1IsTUFBTSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDO1NBQ2pDO0tBQ0QsQ0FBQztJQUVTLGdDQUFtQixHQUFHO1FBQ2hDLFFBQVE7UUFDUixLQUFLO1FBQ0wsS0FBSztRQUNMLE9B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MEI7SUFDckMsSUFBSSxFQUFFO1FBQ0wsTUFBTSxFQUFFLElBQUk7S0FDWjtDQUNELENBQUM7QUFFVyxRQUFBLFlBQVksR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFTLFlBQVksQ0FBQyxXQUFXLHNCQUFpRCxRQUFRLENBQUMsQ0FBQztBQUMvSCxRQUFBLFlBQVksR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFTLFlBQVksQ0FBQyxXQUFXLHNCQUFpRCxRQUFRLENBQUMsQ0FBQztBQUU1SSxRQUFRLEdBQUc7SUFDVixJQUFJLEVBQUU7UUFDTCxHQUFHLEVBQUUsSUFBSTtLQUNUO0NBQ0QsQ0FBQztBQUVXLFFBQUEsYUFBYSxHQUFHLFlBQVksQ0FBQyxPQUFPLENBQVMsWUFBWSxDQUFDLFdBQVcsc0JBQWlELFFBQVEsQ0FBQyxDQUFDO0FBQ2hJLFFBQUEsYUFBYSxHQUFHLFlBQVksQ0FBQyxPQUFPLENBQVMsWUFBWSxDQUFDLFdBQVcsc0JBQWlELFFBQVEsQ0FBQyxDQUFDO0FBRTdJLFFBQVEsR0FBRztJQUNWLElBQUksRUFBRTtRQUNMLE9BQU8sRUFBRSxJQUFJO0tBQ2I7Q0FDRCxDQUFDO0FBRVcsUUFBQSxXQUFXLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBUyxZQUFZLENBQUMsV0FBVyxzQkFBaUQsUUFBUSxDQUFDLENBQUM7QUFDOUgsUUFBQSxXQUFXLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBUyxZQUFZLENBQUMsV0FBVyxzQkFBaUQsUUFBUSxDQUFDLENBQUM7QUFFM0ksa0JBQWUsT0FBc0MsQ0FBQztBQUV0RCw2RUFBNkU7QUFDN0UsNkVBQTZFO0FBQzdFLDRFQUE0RTtBQUM1RSw0RUFBNEUiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiAyMDE3LzEyLzgvMDA4LlxuICovXG5cbmltcG9ydCBkZWVwbWVyZ2UgPSByZXF1aXJlKCdkZWVwbWVyZ2UnKTtcbmltcG9ydCB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5pbXBvcnQgVVN0cmluZyBmcm9tICd1bmktc3RyaW5nJztcblxuZXhwb3J0IG5hbWVzcGFjZSBGdWxsSGFsZkNvcmVcbntcblx0ZXhwb3J0IGNvbnN0IGVudW0gRW51bUZ1bGxIYWxmVGFibGVUeXBlXG5cdHtcblx0XHRGVUxMX1dJRFRIID0gMSxcblx0XHRIQUxGX1dJRFRIID0gMCxcblx0XHROT19FWElTVCA9IC0xLFxuXHR9XG5cblx0ZXhwb3J0IGNvbnN0IEZVTExfV0lEVEggPSBFbnVtRnVsbEhhbGZUYWJsZVR5cGUuRlVMTF9XSURUSDtcblx0ZXhwb3J0IGNvbnN0IEhBTEZfV0lEVEggPSBFbnVtRnVsbEhhbGZUYWJsZVR5cGUuSEFMRl9XSURUSDtcblxuXHRleHBvcnQgY29uc3QgTk9fRVhJU1QgPSBFbnVtRnVsbEhhbGZUYWJsZVR5cGUuTk9fRVhJU1Q7XG5cblx0ZXhwb3J0IGludGVyZmFjZSBJT3B0aW9uc1R5cGVcblx0e1xuXHRcdGVuZz86IGJvb2xlYW4sXG5cdFx0bnVtYmVyPzogYm9vbGVhbixcblxuXHRcdC8qKlxuXHRcdCAqIGVuZyAmIG51bWJlclxuXHRcdCAqL1xuXHRcdGJvdGg/OiBib29sZWFuO1xuXG5cdFx0c3BhY2U/OiBib29sZWFuO1xuXHRcdGV4aXN0cz86IGJvb2xlYW47XG5cblx0XHRkZWZhdWx0PzogYm9vbGVhbjtcblx0XHRub3RfZGVmYXVsdD86IGJvb2xlYW47XG5cdFx0bm90X2RlZmF1bHQyPzogYm9vbGVhbjtcblxuXHRcdHNsYXNoPzogYm9vbGVhbjtcblx0XHRicmFja2V0PzogYm9vbGVhbjtcblxuXHRcdFtpbmRleDogc3RyaW5nXTogYm9vbGVhbjtcblx0fVxuXG5cdGV4cG9ydCBpbnRlcmZhY2UgSU9wdGlvbnNCYXNlXG5cdHtcblx0XHR0eXBlPzogbnVtYmVyO1xuXG5cdFx0c2tpcD86IElPcHRpb25zVHlwZTtcblx0XHRvbmx5PzogSU9wdGlvbnNUeXBlO1xuXG5cdFx0bW9kZT86IHtcblx0XHRcdG9ubHk/OiBib29sZWFuLFxuXG5cdFx0XHRbaW5kZXg6IHN0cmluZ106IGJvb2xlYW47XG5cdFx0fTtcblx0fVxuXG5cdGV4cG9ydCB0eXBlIElPcHRpb25zVHJ1ZSA9IElPcHRpb25zQmFzZSAmIHtcblxuXHRcdC8qKlxuXHRcdCAqIOWbnuWCs+ebtOaOpeWbnuWCs+mZo+WIl+iAjOS4jee1hOWQiOaIkOWtl+S4slxuXHRcdCAqL1xuXHRcdHJldHVyblR5cGU6IElMYXp5VHJ1ZTtcblxuXHR9XG5cblx0ZXhwb3J0IHR5cGUgSU9wdGlvbnNGYWxzZSA9IElPcHRpb25zQmFzZSAmIHtcblxuXHRcdC8qKlxuXHRcdCAqIOWbnuWCs+ebtOaOpeWbnuWCs+mZo+WIl+iAjOS4jee1hOWQiOaIkOWtl+S4slxuXHRcdCAqL1xuXHRcdHJldHVyblR5cGU/OiBJTGF6eUZhbHNlO1xuXG5cdH1cblxuXHRleHBvcnQgdHlwZSBJT3B0aW9ucyA9IElPcHRpb25zQmFzZSAmIHtcblxuXHRcdC8qKlxuXHRcdCAqIOWbnuWCs+ebtOaOpeWbnuWCs+mZo+WIl+iAjOS4jee1hOWQiOaIkOWtl+S4slxuXHRcdCAqL1xuXHRcdHJldHVyblR5cGU/OiBJTGF6eVRydWUgfCBJTGF6eUZhbHNlO1xuXG5cdH1cblxuXHRleHBvcnQgaW50ZXJmYWNlIElUYWJsZU9iamVjdFxuXHR7XG5cdFx0ZnJvbT86IG51bWJlcjtcblx0XHR0bz86IG51bWJlcjtcblxuXHRcdHZhbHVlcz86IG51bWJlcltdO1xuXG5cdFx0bm90PzogSVRhYmxlT2JqZWN0W10sXG5cdH1cblxuXHRleHBvcnQgaW50ZXJmYWNlIElUYWJsZVxuXHR7XG5cdFx0ZGVmYXVsdD86IElUYWJsZU9iamVjdDtcblxuXHRcdG51bWJlcj86IElUYWJsZU9iamVjdDtcblx0XHRzcGFjZT86IElUYWJsZU9iamVjdDtcblxuXHRcdCdBLVonPzogSVRhYmxlT2JqZWN0O1xuXHRcdCdhLXonPzogSVRhYmxlT2JqZWN0O1xuXG5cdFx0bm90X2RlZmF1bHQ/OiBJVGFibGVPYmplY3Q7XG5cblx0XHRbaW5kZXg6IHN0cmluZ106IElUYWJsZU9iamVjdDtcblx0fVxuXG5cdC8qKlxuXHQgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvZGVfcGFnZV80Mzdcblx0ICovXG5cdGxldCBfdGFibGUgPSB7XG5cdFx0ZGVmYXVsdDoge1xuXHRcdFx0ZnJvbTogMHgwMDIwICsgMSxcblx0XHRcdHRvOiAweDAwN0YgLSAxLFxuXHRcdFx0dmFsdWVzOiBbMHgwMDIwXSxcblx0XHR9LFxuXG5cdFx0bnVtYmVyOiBbMHgwMDMwLCAweDAwMzldLFxuXG5cdFx0J0EtWic6IFsweDAwNDEsIDB4MDA1QV0sXG5cdFx0J2Eteic6IFsweDAwNjEsIDB4MDA3QV0sXG5cblx0XHRzcGFjZTogWzB4MDAyMF0sXG5cblx0XHRzbGFzaDoge1xuXHRcdFx0dmFsdWVzOiB1dGlsLmNoYXJDb2RlQXQoYC9cXFxcYCksXG5cdFx0fSxcblxuXHRcdGJyYWNrZXQ6IHtcblx0XHRcdHZhbHVlczogdXRpbC5jaGFyQ29kZUF0KGAoKVtde31gKSxcblx0XHR9LFxuXHR9O1xuXG5cdGV4cG9ydCBsZXQgdGFibGVEZWZhdWx0SW5jbHVkZSA9IFtcblx0XHQnbnVtYmVyJyxcblx0XHQnQS1aJyxcblx0XHQnYS16Jyxcblx0XHQnc3BhY2UnLFxuXHRcdCdub3RfZGVmYXVsdCcsXG5cdF07XG5cblx0ZXhwb3J0IGxldCB0YWJsZTogSVRhYmxlW10gPSBbXTtcblxuXHR7XG5cdFx0bGV0IF9rZXlzID0gdGFibGVEZWZhdWx0SW5jbHVkZS5zbGljZSgwLCAtMSk7XG5cblx0XHR0YWJsZVswXSA9IHt9O1xuXHRcdHRhYmxlWzFdID0ge307XG5cblx0XHRmb3IgKGxldCBrIGluIF90YWJsZSlcblx0XHR7XG5cdFx0XHRsZXQgdiA9IF90YWJsZVtrXTtcblxuXHRcdFx0bGV0IHI7XG5cblx0XHRcdHIgPSBmbih2KTtcblxuXHRcdFx0aWYgKHIpXG5cdFx0XHR7XG5cdFx0XHRcdHRhYmxlW0VudW1GdWxsSGFsZlRhYmxlVHlwZS5IQUxGX1dJRFRIXVtrXSA9IHJbMV07XG5cdFx0XHRcdHRhYmxlW0VudW1GdWxsSGFsZlRhYmxlVHlwZS5GVUxMX1dJRFRIXVtrXSA9IHJbMF07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bGV0IHIgPSBmbihfdGFibGUuZGVmYXVsdCk7XG5cblx0XHRyWzBdLm5vdCA9IFtdO1xuXHRcdHJbMV0ubm90ID0gW107XG5cblx0XHRmb3IgKGxldCBrIG9mIF9rZXlzKVxuXHRcdHtcblx0XHRcdGxldCB2ID0gX3RhYmxlW2tdO1xuXG5cdFx0XHRsZXQgcjI7XG5cblx0XHRcdHIyID0gZm4odik7XG5cblx0XHRcdGlmIChyMilcblx0XHRcdHtcblx0XHRcdFx0clswXS5ub3QucHVzaChyMlswXSk7XG5cdFx0XHRcdHJbMV0ubm90LnB1c2gocjJbMV0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRhYmxlW0VudW1GdWxsSGFsZlRhYmxlVHlwZS5IQUxGX1dJRFRIXVsnbm90X2RlZmF1bHQnXSA9IHJbMV07XG5cdFx0dGFibGVbRW51bUZ1bGxIYWxmVGFibGVUeXBlLkZVTExfV0lEVEhdWydub3RfZGVmYXVsdCddID0gclswXTtcblxuXHRcdC8vY29uc29sZS5sb2codGFibGUpO1xuXG5cdFx0ZnVuY3Rpb24gZm4odilcblx0XHR7XG5cdFx0XHRsZXQgcjogSVRhYmxlT2JqZWN0W10gPSBbXTtcblxuXHRcdFx0clswXSA9IHt9O1xuXHRcdFx0clsxXSA9IHt9O1xuXG5cdFx0XHRsZXQgX3NraXAgPSB0cnVlO1xuXG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheSh2KSlcblx0XHRcdHtcblx0XHRcdFx0aWYgKHYubGVuZ3RoID09IDIpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyWzBdLmZyb20gPSB2WzBdO1xuXHRcdFx0XHRcdHJbMF0udG8gPSB2WzFdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJbMF0udmFsdWVzID0gdjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdF9za2lwID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh2LmZyb20gJiYgdi50bylcblx0XHRcdHtcblx0XHRcdFx0clswXS5mcm9tID0gdi5mcm9tO1xuXHRcdFx0XHRyWzBdLnRvID0gdi50bztcblxuXHRcdFx0XHRfc2tpcCA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheSh2LnZhbHVlcykgJiYgdi52YWx1ZXMubGVuZ3RoKVxuXHRcdFx0e1xuXHRcdFx0XHRyWzBdLnZhbHVlcyA9IHYudmFsdWVzO1xuXG5cdFx0XHRcdF9za2lwID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChfc2tpcClcblx0XHRcdHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoclswXS5mcm9tICYmIHJbMF0udG8pXG5cdFx0XHR7XG5cdFx0XHRcdHJbMV0uZnJvbSA9IHRvRnVsbFdpZHRoKHJbMF0uZnJvbSk7XG5cdFx0XHRcdHJbMV0udG8gPSB0b0Z1bGxXaWR0aChyWzBdLnRvKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHJbMF0udmFsdWVzKVxuXHRcdFx0e1xuXHRcdFx0XHRyWzFdLnZhbHVlcyA9IChyWzBdLnZhbHVlcyBhcyBudW1iZXJbXSkucmVkdWNlKGZ1bmN0aW9uIChhLCBjb2RlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0YS5wdXNoKHRvRnVsbFdpZHRoKGNvZGUpKTtcblxuXHRcdFx0XHRcdHJldHVybiBhO1xuXHRcdFx0XHR9LCBbXSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByO1xuXHRcdH1cblx0fVxuXG5cdGV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJUYWJsZShkYXRhKVxuXHR7XG5cdFx0bGV0IF9hID0gW107XG5cblx0XHRpZiAoZGF0YS5mcm9tICYmIGRhdGEudG8pXG5cdFx0e1xuXHRcdFx0Zm9yIChsZXQgaSA9IGRhdGEuZnJvbTsgaTw9ZGF0YS50bzsgaSsrKVxuXHRcdFx0e1xuXHRcdFx0XHRfYS5wdXNoKGkpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChkYXRhLnZhbHVlcylcblx0XHR7XG5cdFx0XHRfYSA9IF9hLmNvbmNhdChkYXRhLnZhbHVlcylcblx0XHR9XG5cblx0XHRpZiAoQXJyYXkuaXNBcnJheShkYXRhLm5vdCkgJiYgZGF0YS5ub3QubGVuZ3RoKVxuXHRcdHtcblx0XHRcdF9hID0gX2EuZmlsdGVyKGZ1bmN0aW9uIChjaGFyQ29kZSlcblx0XHRcdHtcblx0XHRcdFx0Zm9yIChsZXQgZCBvZiBkYXRhLm5vdClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmIChfY2hrVHlwZShjaGFyQ29kZSwgZCkpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIF9hO1xuXHR9XG5cblx0ZXhwb3J0IGZ1bmN0aW9uIF9jaGtUeXBlKGNoYXJDb2RlOiBudW1iZXIsIGRhdGE6IElUYWJsZU9iamVjdClcblx0e1xuXHRcdGlmIChkYXRhLmZyb20gJiYgZGF0YS50byAmJiBkYXRhLmZyb20gPD0gY2hhckNvZGUgJiYgY2hhckNvZGUgPD0gZGF0YS50bylcblx0XHR7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAoZGF0YS52YWx1ZXMgJiYgZGF0YS52YWx1ZXMuaW5jbHVkZXMoY2hhckNvZGUpKVxuXHRcdHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdGV4cG9ydCBmdW5jdGlvbiBjaGtUeXBlKGNoYXJDb2RlOiBudW1iZXIsIGtleTogc3RyaW5nLCB0eXBlOiBudW1iZXIpXG5cdHtcblx0XHRsZXQgZGF0YSA9IHRhYmxlW3R5cGVdW2tleV07XG5cblx0XHQvL2NvbnNvbGUubG9nKGNoYXJDb2RlLCBkYXRhKTtcblxuXHRcdGlmIChBcnJheS5pc0FycmF5KGRhdGEubm90KSAmJiBkYXRhLm5vdC5sZW5ndGgpXG5cdFx0e1xuXHRcdFx0Zm9yIChsZXQgZCBvZiBkYXRhLm5vdClcblx0XHRcdHtcblx0XHRcdFx0aWYgKF9jaGtUeXBlKGNoYXJDb2RlLCBkKSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChfY2hrVHlwZShjaGFyQ29kZSwgZGF0YSkpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9XG5cblx0ZXhwb3J0IGZ1bmN0aW9uIGhhc0Z1bGxIYWxmKGNoYXJDb2RlOiBudW1iZXIpXG5cdHtcblx0XHRpZiAoMHgwMDIwIDw9IGNoYXJDb2RlICYmIGNoYXJDb2RlIDwgMHgwMDdGKVxuXHRcdHtcblx0XHRcdHJldHVybiBFbnVtRnVsbEhhbGZUYWJsZVR5cGUuSEFMRl9XSURUSDtcblx0XHR9XG5cblx0XHRpZiAoMHgzMDAwID09PSBjaGFyQ29kZSB8fCAweEZGMDAgPCBjaGFyQ29kZSAmJiBjaGFyQ29kZSA8IDB4RkY1Rilcblx0XHR7XG5cdFx0XHRyZXR1cm4gRW51bUZ1bGxIYWxmVGFibGVUeXBlLkZVTExfV0lEVEg7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIEVudW1GdWxsSGFsZlRhYmxlVHlwZS5OT19FWElTVDtcblx0fVxuXG5cdGV4cG9ydCBmdW5jdGlvbiBpc0Z1bGxIYWxmKGNoYXJDb2RlOiBudW1iZXIpXG5cdHtcblx0XHRsZXQgciA9IGhhc0Z1bGxIYWxmKGNoYXJDb2RlKTtcblxuXHRcdGlmIChyID09PSBFbnVtRnVsbEhhbGZUYWJsZVR5cGUuRlVMTF9XSURUSClcblx0XHR7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAociA9PT0gRW51bUZ1bGxIYWxmVGFibGVUeXBlLkhBTEZfV0lEVEgpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0Ly8gQHRvZG8gYWRkIG1vcmUuLi5cblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdGV4cG9ydCBmdW5jdGlvbiB0b0Z1bGxXaWR0aChjaGFyQ29kZTogbnVtYmVyKVxuXHR7XG5cdFx0aWYgKDB4MDAyMCA8IGNoYXJDb2RlICYmIGNoYXJDb2RlIDwgMHgwMDdGKVxuXHRcdHtcblx0XHRcdHJldHVybiAweEZGMDAgKyAoY2hhckNvZGUgLSAweDAwMjApO1xuXHRcdH1cblxuXHRcdGlmICgweDAwMjAgPT09IGNoYXJDb2RlKVxuXHRcdHtcblx0XHRcdHJldHVybiAweDMwMDA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNoYXJDb2RlO1xuXHR9XG5cblx0ZXhwb3J0IGZ1bmN0aW9uIHRvSGFsZldpZHRoKGNoYXJDb2RlOiBudW1iZXIpXG5cdHtcblx0XHRpZiAoMHhGRjAwIDwgY2hhckNvZGUgJiYgY2hhckNvZGUgPCAweEZGNUYpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIDB4MDAyMCArIChjaGFyQ29kZSAtIDB4RkYwMCk7XG5cdFx0fVxuXG5cdFx0aWYgKDB4MzAwMCA9PT0gY2hhckNvZGUpXG5cdFx0e1xuXHRcdFx0cmV0dXJuIDB4MDAyMDtcblx0XHR9XG5cblx0XHRyZXR1cm4gY2hhckNvZGU7XG5cdH1cblxuXHRleHBvcnQgZnVuY3Rpb24gX29wdGlvbnNUeXBlKGRhdGE6IElPcHRpb25zVHlwZSlcblx0e1xuXHRcdGlmIChkYXRhKVxuXHRcdHtcblx0XHRcdGlmICh0eXBlb2YgZGF0YS5leGlzdHMgPT0gJ2Jvb2xlYW4nKVxuXHRcdFx0e1xuXHRcdFx0XHRmb3IgKGxldCBrZXkgaW4gdGFibGVbMF0pXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpZiAoa2V5LmluZGV4T2YoJ2RlZmF1bHQnKSA9PSAwKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChkYXRhW2tleV0gIT09IGZhbHNlKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGRhdGFba2V5XSA9IGRhdGEuZXhpc3RzO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRlbGV0ZSBkYXRhLmV4aXN0cztcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0aWYgKHR5cGVvZiBkYXRhLmRlZmF1bHQgPT0gJ2Jvb2xlYW4nKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Zm9yIChsZXQga2V5IG9mIHRhYmxlRGVmYXVsdEluY2x1ZGUpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0aWYgKGRhdGFba2V5XSAhPT0gZmFsc2UpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGRhdGFba2V5XSA9IGRhdGEuZGVmYXVsdDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRkZWxldGUgZGF0YS5kZWZhdWx0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBkYXRhLm5vdF9kZWZhdWx0MiA9PSAnYm9vbGVhbicpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkYXRhLmJvdGggPSBkYXRhLnNwYWNlID0gZGF0YS5ub3RfZGVmYXVsdDI7XG5cdFx0XHRcdFx0ZGVsZXRlIGRhdGEubm90X2RlZmF1bHQyO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBkYXRhLmJvdGggPT0gJ2Jvb2xlYW4nKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGF0YS5udW1iZXIgPSBkYXRhLmVuZyA9IGRhdGEuYm90aDtcblx0XHRcdFx0XHRkZWxldGUgZGF0YS5ib3RoO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBkYXRhLmVuZyA9PSAnYm9vbGVhbicpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRkYXRhWydhLXonXSA9IGRhdGFbJ0EtWiddID0gZGF0YS5lbmc7XG5cdFx0XHRcdFx0ZGVsZXRlIGRhdGEuZW5nO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRhdGE7XG5cdH1cblxuXHRleHBvcnQgZnVuY3Rpb24gcHJvY2VzczxULCBVID0gc3RyaW5nPihzdHIsIGNoYXJQcm9jZXNzLCBvcHRpb25zOiBJT3B0aW9ucylcblx0e1xuXHRcdGxldCByZXQ6IG51bWJlcltdID0gW107XG5cblx0XHRvcHRpb25zLnNraXAgPSBfb3B0aW9uc1R5cGUob3B0aW9ucy5za2lwKTtcblx0XHRvcHRpb25zLm9ubHkgPSBfb3B0aW9uc1R5cGUob3B0aW9ucy5vbmx5KTtcblxuXHRcdC8vY29uc29sZS5sb2cob3B0aW9ucyk7XG5cblx0XHRsZXQgX3N0ciA9IEFycmF5LmlzQXJyYXkoc3RyKSA/IHN0ciA6IG5ldyBVU3RyaW5nKHN0cik7XG5cblx0XHRmb3IgKGxldCBjaGFyIG9mIF9zdHIpXG5cdFx0e1xuXHRcdFx0bGV0IF9za2lwOiBib29sZWFuO1xuXG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHQvL2xldCBjaGFyQ29kZSA9IHR5cGVvZiBjaGFyID09ICdudW1iZXInID8gY2hhciA6IGNoYXIuY2hhckNvZGVBdCgpO1xuXHRcdFx0bGV0IGNoYXJDb2RlID0gdHlwZW9mIGNoYXIgPT0gJ251bWJlcicgPyBjaGFyIDogY2hhci5jb2RlUG9pbnRBdCgpO1xuXG5cdFx0XHRpZiAob3B0aW9ucy5vbmx5KVxuXHRcdFx0e1xuXHRcdFx0XHRfc2tpcCA9IHRydWU7XG5cblx0XHRcdFx0Zm9yIChsZXQga2V5IGluIG9wdGlvbnMub25seSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdC8vY29uc29sZS5sb2coY2hhciwgY2hhckNvZGUsIFtrZXldLCBjaGtUeXBlKGNoYXJDb2RlLCBrZXksIG9wdGlvbnMudHlwZSkpO1xuXG5cdFx0XHRcdFx0aWYgKG9wdGlvbnMub25seVtrZXldICYmIGNoa1R5cGUoY2hhckNvZGUsIGtleSwgb3B0aW9ucy50eXBlKSlcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRfc2tpcCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhjaGFyLCBjaGFyQ29kZSwgX3NraXApO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIV9za2lwICYmIG9wdGlvbnMuc2tpcClcblx0XHRcdHtcblx0XHRcdFx0Zm9yIChsZXQga2V5IGluIG9wdGlvbnMuc2tpcClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmIChvcHRpb25zLnNraXBba2V5XSAmJiBjaGtUeXBlKGNoYXJDb2RlLCBrZXksIG9wdGlvbnMudHlwZSkpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0X3NraXAgPSB0cnVlO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChfc2tpcClcblx0XHRcdHtcblx0XHRcdFx0cmV0LnB1c2goY2hhckNvZGUpO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0cmV0LnB1c2goY2hhclByb2Nlc3MoY2hhckNvZGUpKTtcblx0XHR9XG5cblx0XHRpZiAob3B0aW9ucy5yZXR1cm5UeXBlKVxuXHRcdHtcblx0XHRcdHJldHVybiByZXQgYXMgbnVtYmVyW107XG5cdFx0fVxuXG5cdFx0Ly9yZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIHJldCk7XG5cdFx0cmV0dXJuIFN0cmluZy5mcm9tQ29kZVBvaW50LmFwcGx5KFN0cmluZywgcmV0KTtcblx0fVxuXG5cdGV4cG9ydCBmdW5jdGlvbiBmYWN0b3J5PFQgPSBzdHJpbmc+KGNoYXJQcm9jZXNzb3IsIHR5cGU6IG51bWJlciB8IEVudW1GdWxsSGFsZlRhYmxlVHlwZSwgb3ZlcndyaXRlT3B0aW9ucz86IElPcHRpb25zKTogSUZhY3RvcnlGblxuXHR7XG5cdFx0Ly9jb25zdCBkZWVwbWVyZ2UgPSByZXF1aXJlKCdkZWVwbWVyZ2UnKTtcblxuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHRyZXR1cm4gKHN0ciwgb3B0aW9ucz86IElPcHRpb25zKSA9PlxuXHRcdHtcblx0XHRcdG9wdGlvbnMgPSBkZWVwbWVyZ2UuYWxsKFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdC8vc2tpcDoge30sXG5cdFx0XHRcdH0sIG9wdGlvbnMgfHwge30sIG92ZXJ3cml0ZU9wdGlvbnMgfHwge30sIHtcblx0XHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSk7XG5cblx0XHRcdC8vY29uc29sZS5sb2cob3B0aW9ucyk7XG5cblx0XHRcdHJldHVybiBwcm9jZXNzPFQ+KHN0ciwgY2hhclByb2Nlc3Nvciwgb3B0aW9ucyk7XG5cdFx0fTtcblx0fVxuXG5cdHR5cGUgSUxhenlUcnVlID0gdHJ1ZSB8IDE7XG5cdHR5cGUgSUxhenlGYWxzZSA9IDAgfCBmYWxzZSB8IHZvaWQgfCB1bmRlZmluZWQgfCBudWxsO1xuXG5cdGV4cG9ydCBpbnRlcmZhY2UgSUZhY3RvcnlGblxuXHR7XG5cdFx0KHN0cjogc3RyaW5nIHwgc3RyaW5nW10sIG9wdGlvbnM/OiBJT3B0aW9uc0ZhbHNlKTogc3RyaW5nXG5cdFx0KHN0cjogKHN0cmluZyB8IG51bWJlcilbXSwgb3B0aW9uczogSU9wdGlvbnNUcnVlKTogbnVtYmVyW11cblxuXHRcdChzdHIsIG9wdGlvbnM6IElPcHRpb25zVHJ1ZSk6IG51bWJlcltdXG5cblx0XHQoc3RyOiAoc3RyaW5nIHwgbnVtYmVyKVtdKTogc3RyaW5nXG5cblx0XHQoc3RyOiAoc3RyaW5nIHwgbnVtYmVyKVtdLCBvcHRpb25zPzogSU9wdGlvbnNGYWxzZSk6IHN0cmluZ1xuXG5cdFx0KHN0ciwgb3B0aW9uczogSU9wdGlvbnNGYWxzZSk6IHN0cmluZ1xuXG5cdFx0KHN0ciwgb3B0aW9uczogSU9wdGlvbnMpOiBzdHJpbmcgfCBudW1iZXJbXVxuXHR9XG59XG5cbmV4cG9ydCBpbXBvcnQgSUZhY3RvcnlGbiA9IEZ1bGxIYWxmQ29yZS5JRmFjdG9yeUZuO1xuZXhwb3J0IGltcG9ydCBFbnVtRnVsbEhhbGZUYWJsZVR5cGUgPSBGdWxsSGFsZkNvcmUuRW51bUZ1bGxIYWxmVGFibGVUeXBlO1xuZXhwb3J0IGltcG9ydCBJT3B0aW9ucyA9IEZ1bGxIYWxmQ29yZS5JT3B0aW9ucztcbmV4cG9ydCBpbXBvcnQgSU9wdGlvbnNUeXBlID0gRnVsbEhhbGZDb3JlLklPcHRpb25zVHlwZTtcbmV4cG9ydCBpbXBvcnQgSVRhYmxlID0gRnVsbEhhbGZDb3JlLklUYWJsZTtcbmV4cG9ydCBpbXBvcnQgSVRhYmxlT2JqZWN0ID0gRnVsbEhhbGZDb3JlLklUYWJsZU9iamVjdDtcblxubGV0IHR5cGVPbmx5OiBGdWxsSGFsZkNvcmUuSU9wdGlvbnMgPSB7XG5cdG9ubHk6IHtcblx0XHRudW1iZXI6IHRydWUsXG5cdH0sXG59O1xuXG5leHBvcnQgY29uc3QgdG9GdWxsTnVtYmVyID0gRnVsbEhhbGZDb3JlLmZhY3Rvcnk8c3RyaW5nPihGdWxsSGFsZkNvcmUudG9GdWxsV2lkdGgsIEZ1bGxIYWxmQ29yZS5FbnVtRnVsbEhhbGZUYWJsZVR5cGUuRlVMTF9XSURUSCwgdHlwZU9ubHkpO1xuZXhwb3J0IGNvbnN0IHRvSGFsZk51bWJlciA9IEZ1bGxIYWxmQ29yZS5mYWN0b3J5PHN0cmluZz4oRnVsbEhhbGZDb3JlLnRvSGFsZldpZHRoLCBGdWxsSGFsZkNvcmUuRW51bUZ1bGxIYWxmVGFibGVUeXBlLkhBTEZfV0lEVEgsIHR5cGVPbmx5KTtcblxudHlwZU9ubHkgPSB7XG5cdG9ubHk6IHtcblx0XHRlbmc6IHRydWUsXG5cdH0sXG59O1xuXG5leHBvcnQgY29uc3QgdG9GdWxsRW5nbGlzaCA9IEZ1bGxIYWxmQ29yZS5mYWN0b3J5PHN0cmluZz4oRnVsbEhhbGZDb3JlLnRvRnVsbFdpZHRoLCBGdWxsSGFsZkNvcmUuRW51bUZ1bGxIYWxmVGFibGVUeXBlLkZVTExfV0lEVEgsIHR5cGVPbmx5KTtcbmV4cG9ydCBjb25zdCB0b0hhbGZFbmdsaXNoID0gRnVsbEhhbGZDb3JlLmZhY3Rvcnk8c3RyaW5nPihGdWxsSGFsZkNvcmUudG9IYWxmV2lkdGgsIEZ1bGxIYWxmQ29yZS5FbnVtRnVsbEhhbGZUYWJsZVR5cGUuSEFMRl9XSURUSCwgdHlwZU9ubHkpO1xuXG50eXBlT25seSA9IHtcblx0b25seToge1xuXHRcdGRlZmF1bHQ6IHRydWUsXG5cdH0sXG59O1xuXG5leHBvcnQgY29uc3QgdG9GdWxsV2lkdGggPSBGdWxsSGFsZkNvcmUuZmFjdG9yeTxzdHJpbmc+KEZ1bGxIYWxmQ29yZS50b0Z1bGxXaWR0aCwgRnVsbEhhbGZDb3JlLkVudW1GdWxsSGFsZlRhYmxlVHlwZS5GVUxMX1dJRFRILCB0eXBlT25seSk7XG5leHBvcnQgY29uc3QgdG9IYWxmV2lkdGggPSBGdWxsSGFsZkNvcmUuZmFjdG9yeTxzdHJpbmc+KEZ1bGxIYWxmQ29yZS50b0hhbGZXaWR0aCwgRnVsbEhhbGZDb3JlLkVudW1GdWxsSGFsZlRhYmxlVHlwZS5IQUxGX1dJRFRILCB0eXBlT25seSk7XG5cbmV4cG9ydCBkZWZhdWx0IGV4cG9ydHMgYXMgdHlwZW9mIGltcG9ydCgnLi9mdWxsaGFsZicpO1xuXG4vL2NvbnNvbGUubG9nKHRvRnVsbEVuZ2xpc2goJzEyM2FiY0FCQ++8oe+8ou+8o++8ke+8ku+8k++8j++8iu+8je+8i++8ne+8je+8kO+8ve+8u+KAme+8m++8j++8jistKi89LTA5XVtcXCdcIjsvLicpKTtcbi8vY29uc29sZS5sb2codG9IYWxmRW5nbGlzaCgnMTIzYWJjQUJD77yh77yi77yj77yR77yS77yT77yP77yK77yN77yL77yd77yN77yQ77y977y74oCZ77yb77yP77yOKy0qLz0tMDldW1xcJ1wiOy8uJykpO1xuLy9jb25zb2xlLmxvZyh0b0Z1bGxOdW1iZXIoJzEyM2FiY0FCQ++8oe+8ou+8o++8ke+8ku+8k++8j++8iu+8je+8i++8ne+8je+8kO+8ve+8u+KAme+8m++8j++8jistKi89LTA5XVtcXCdcIjsvLicpKTtcbi8vY29uc29sZS5sb2codG9IYWxmTnVtYmVyKCcxMjNhYmNBQkPvvKHvvKLvvKPvvJHvvJLvvJPvvI/vvIrvvI3vvIvvvJ3vvI3vvJDvvL3vvLvigJnvvJvvvI/vvI4rLSovPS0wOV1bXFwnXCI7Ly4nKSk7XG4iXX0=