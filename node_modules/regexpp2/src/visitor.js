"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * @deprecated merge not done, don't use
 * The visitor to walk on AST.
 */
class RegExpVisitor {
    /**
     * Initialize this visitor.
     * @param handlers Callbacks for each node.
     */
    constructor(handlers) {
        this._handlers = handlers;
    }
    /**
     * Visit a given node and descendant nodes.
     * @param node The root node to visit tree.
     */
    visit(node) {
        switch (node.type) {
            case "Alternative":
                this.visitAlternative(node);
                break;
            case "Assertion":
                this.visitAssertion(node);
                break;
            case "Backreference":
                this.visitBackreference(node);
                break;
            case "CapturingGroup":
                this.visitCapturingGroup(node);
                break;
            case "Character":
                this.visitCharacter(node);
                break;
            case "CharacterClass":
                this.visitCharacterClass(node);
                break;
            case "CharacterClassRange":
                this.visitCharacterClassRange(node);
                break;
            case "CharacterSet":
                this.visitCharacterSet(node);
                break;
            case "Flags":
                this.visitFlags(node);
                break;
            case "Group":
                this.visitGroup(node);
                break;
            case "Pattern":
                this.visitPattern(node);
                break;
            case "Quantifier":
                this.visitQuantifier(node);
                break;
            case "RegExpLiteral":
                this.visitRegExpLiteral(node);
                break;
            default:
                throw new Error(`Unknown type: ${node.type}`);
        }
    }
    visitAlternative(node) {
        if (this._handlers.onAlternativeEnter) {
            this._handlers.onAlternativeEnter(node);
        }
        node.elements.forEach(this.visit, this);
        if (this._handlers.onAlternativeLeave) {
            this._handlers.onAlternativeLeave(node);
        }
    }
    visitAssertion(node) {
        if (this._handlers.onAssertionEnter) {
            this._handlers.onAssertionEnter(node);
        }
        if (node.kind === "lookahead" || node.kind === "lookbehind") {
            node.alternatives.forEach(this.visit, this);
        }
        if (this._handlers.onAssertionLeave) {
            this._handlers.onAssertionLeave(node);
        }
    }
    visitBackreference(node) {
        if (this._handlers.onBackreferenceEnter) {
            this._handlers.onBackreferenceEnter(node);
        }
        if (this._handlers.onBackreferenceLeave) {
            this._handlers.onBackreferenceLeave(node);
        }
    }
    visitCapturingGroup(node) {
        if (this._handlers.onCapturingGroupEnter) {
            this._handlers.onCapturingGroupEnter(node);
        }
        node.alternatives.forEach(this.visit, this);
        if (this._handlers.onCapturingGroupLeave) {
            this._handlers.onCapturingGroupLeave(node);
        }
    }
    visitCharacter(node) {
        if (this._handlers.onCharacterEnter) {
            this._handlers.onCharacterEnter(node);
        }
        if (this._handlers.onCharacterLeave) {
            this._handlers.onCharacterLeave(node);
        }
    }
    visitCharacterClass(node) {
        if (this._handlers.onCharacterClassEnter) {
            this._handlers.onCharacterClassEnter(node);
        }
        node.elements.forEach(this.visit, this);
        if (this._handlers.onCharacterClassLeave) {
            this._handlers.onCharacterClassLeave(node);
        }
    }
    visitCharacterClassRange(node) {
        if (this._handlers.onCharacterClassRangeEnter) {
            this._handlers.onCharacterClassRangeEnter(node);
        }
        this.visitCharacter(node.min);
        this.visitCharacter(node.max);
        if (this._handlers.onCharacterClassRangeLeave) {
            this._handlers.onCharacterClassRangeLeave(node);
        }
    }
    visitCharacterSet(node) {
        if (this._handlers.onCharacterSetEnter) {
            this._handlers.onCharacterSetEnter(node);
        }
        if (this._handlers.onCharacterSetLeave) {
            this._handlers.onCharacterSetLeave(node);
        }
    }
    visitFlags(node) {
        if (this._handlers.onFlagsEnter) {
            this._handlers.onFlagsEnter(node);
        }
        if (this._handlers.onFlagsLeave) {
            this._handlers.onFlagsLeave(node);
        }
    }
    visitGroup(node) {
        if (this._handlers.onGroupEnter) {
            this._handlers.onGroupEnter(node);
        }
        node.alternatives.forEach(this.visit, this);
        if (this._handlers.onGroupLeave) {
            this._handlers.onGroupLeave(node);
        }
    }
    visitPattern(node) {
        if (this._handlers.onPatternEnter) {
            this._handlers.onPatternEnter(node);
        }
        node.alternatives.forEach(this.visit, this);
        if (this._handlers.onPatternLeave) {
            this._handlers.onPatternLeave(node);
        }
    }
    visitQuantifier(node) {
        if (this._handlers.onQuantifierEnter) {
            this._handlers.onQuantifierEnter(node);
        }
        this.visit(node.element);
        if (this._handlers.onQuantifierLeave) {
            this._handlers.onQuantifierLeave(node);
        }
    }
    visitRegExpLiteral(node) {
        if (this._handlers.onRegExpLiteralEnter) {
            this._handlers.onRegExpLiteralEnter(node);
        }
        this.visitPattern(node.pattern);
        this.visitFlags(node.flags);
        if (this._handlers.onRegExpLiteralLeave) {
            this._handlers.onRegExpLiteralLeave(node);
        }
    }
}
exports.RegExpVisitor = RegExpVisitor;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzaXRvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInZpc2l0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFpQkE7OztHQUdHO0FBQ0gsTUFBYSxhQUFhO0lBR3RCOzs7T0FHRztJQUNILFlBQW1CLFFBQWdDO1FBQy9DLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFBO0lBQzdCLENBQUM7SUFFRDs7O09BR0c7SUFDSSxLQUFLLENBQUMsSUFBVTtRQUNuQixRQUFRLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDZixLQUFLLGFBQWE7Z0JBQ2QsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFBO2dCQUMzQixNQUFLO1lBQ1QsS0FBSyxXQUFXO2dCQUNaLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUE7Z0JBQ3pCLE1BQUs7WUFDVCxLQUFLLGVBQWU7Z0JBQ2hCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQTtnQkFDN0IsTUFBSztZQUNULEtBQUssZ0JBQWdCO2dCQUNqQixJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLENBQUE7Z0JBQzlCLE1BQUs7WUFDVCxLQUFLLFdBQVc7Z0JBQ1osSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtnQkFDekIsTUFBSztZQUNULEtBQUssZ0JBQWdCO2dCQUNqQixJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLENBQUE7Z0JBQzlCLE1BQUs7WUFDVCxLQUFLLHFCQUFxQjtnQkFDdEIsSUFBSSxDQUFDLHdCQUF3QixDQUFDLElBQUksQ0FBQyxDQUFBO2dCQUNuQyxNQUFLO1lBQ1QsS0FBSyxjQUFjO2dCQUNmLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQTtnQkFDNUIsTUFBSztZQUNULEtBQUssT0FBTztnQkFDUixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFBO2dCQUNyQixNQUFL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LFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQTtTQUN6QztRQUNELElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQ3hCLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsRUFBRTtZQUNsQyxJQUFJLENBQUMsU0FBUyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFBO1NBQ3pDO0lBQ0wsQ0FBQztJQUNPLGtCQUFrQixDQUFDLElBQW1CO1FBQzFDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsRUFBRTtZQUNyQyxJQUFJLENBQUMsU0FBUyxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxDQUFBO1NBQzVDO1FBQ0QsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUE7UUFDL0IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDM0IsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLG9CQUFvQixFQUFFO1lBQ3JDLElBQUksQ0FBQyxTQUFTLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLENBQUE7U0FDNUM7SUFDTCxDQUFDO0NBQ0o7QUFsTEQsc0NBa0xDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICAvL0FsdGVybmF0aXZlLFxuICAgIEFzc2VydGlvbixcbiAgICBCYWNrcmVmZXJlbmNlLFxuICAgIENhcHR1cmluZ0dyb3VwLFxuICAgIENoYXJhY3RlcixcbiAgICBDaGFyYWN0ZXJDbGFzcyxcbiAgICBDaGFyYWN0ZXJDbGFzc1JhbmdlLFxuICAgIENoYXJhY3RlclNldCxcbiAgICBGbGFncyxcbiAgICBHcm91cCxcbiAgICBOb2RlLFxuICAgIFBhdHRlcm4sXG4gICAgUXVhbnRpZmllcixcbiAgICBSZWdFeHBMaXRlcmFsLFxufSBmcm9tIFwiLi9hc3RcIlxuXG4vKipcbiAqIEBkZXByZWNhdGVkIG1lcmdlIG5vdCBkb25lLCBkb24ndCB1c2VcbiAqIFRoZSB2aXNpdG9yIHRvIHdhbGsgb24gQVNULlxuICovXG5leHBvcnQgY2xhc3MgUmVnRXhwVmlzaXRvciB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBfaGFuZGxlcnM6IFJlZ0V4cFZpc2l0b3IuSGFuZGxlcnNcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhpcyB2aXNpdG9yLlxuICAgICAqIEBwYXJhbSBoYW5kbGVycyBDYWxsYmFja3MgZm9yIGVhY2ggbm9kZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoaGFuZGxlcnM6IFJlZ0V4cFZpc2l0b3IuSGFuZGxlcnMpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlcnMgPSBoYW5kbGVyc1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZpc2l0IGEgZ2l2ZW4gbm9kZSBhbmQgZGVzY2VuZGFudCBub2Rlcy5cbiAgICAgKiBAcGFyYW0gbm9kZSBUaGUgcm9vdCBub2RlIHRvIHZpc2l0IHRyZWUuXG4gICAgICovXG4gICAgcHVibGljIHZpc2l0KG5vZGU6IE5vZGUpOiB2b2lkIHtcbiAgICAgICAgc3dpdGNoIChub2RlLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJBbHRlcm5hdGl2ZVwiOlxuICAgICAgICAgICAgICAgIHRoaXMudmlzaXRBbHRlcm5hdGl2ZShub2RlKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIFwiQXNzZXJ0aW9uXCI6XG4gICAgICAgICAgICAgICAgdGhpcy52aXNpdEFzc2VydGlvbihub2RlKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIFwiQmFja3JlZmVyZW5jZVwiOlxuICAgICAgICAgICAgICAgIHRoaXMudmlzaXRCYWNrcmVmZXJlbmNlKG5vZGUpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgXCJDYXB0dXJpbmdHcm91cFwiOlxuICAgICAgICAgICAgICAgIHRoaXMudmlzaXRDYXB0dXJpbmdHcm91cChub2RlKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIFwiQ2hhcmFjdGVyXCI6XG4gICAgICAgICAgICAgICAgdGhpcy52aXNpdENoYXJhY3Rlcihub2RlKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIFwiQ2hhcmFjdGVyQ2xhc3NcIjpcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2l0Q2hhcmFjdGVyQ2xhc3Mobm9kZSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBcIkNoYXJhY3RlckNsYXNzUmFuZ2VcIjpcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2l0Q2hhcmFjdGVyQ2xhc3NSYW5nZShub2RlKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIFwiQ2hhcmFjdGVyU2V0XCI6XG4gICAgICAgICAgICAgICAgdGhpcy52aXNpdENoYXJhY3RlclNldChub2RlKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIFwiRmxhZ3NcIjpcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2l0RmxhZ3Mobm9kZSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBcIkdyb3VwXCI6XG4gICAgICAgICAgICAgICAgdGhpcy52aXNpdEdyb3VwKG5vZGUpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgXCJQYXR0ZXJuXCI6XG4gICAgICAgICAgICAgICAgdGhpcy52aXNpdFBhdHRlcm4obm9kZSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBcIlF1YW50aWZpZXJcIjpcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2l0UXVhbnRpZmllcihub2RlKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIFwiUmVnRXhwTGl0ZXJhbFwiOlxuICAgICAgICAgICAgICAgIHRoaXMudmlzaXRSZWdFeHBMaXRlcmFsKG5vZGUpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHR5cGU6ICR7KG5vZGUgYXMgYW55KS50eXBlfWApXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHZpc2l0QWx0ZXJuYXRpdmUobm9kZTogQWx0ZXJuYXRpdmUpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhbmRsZXJzLm9uQWx0ZXJuYXRpdmVFbnRlcikge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlcnMub25BbHRlcm5hdGl2ZUVudGVyKG5vZGUpXG4gICAgICAgIH1cbiAgICAgICAgbm9kZS5lbGVtZW50cy5mb3JFYWNoKHRoaXMudmlzaXQsIHRoaXMpXG4gICAgICAgIGlmICh0aGlzLl9oYW5kbGVycy5vbkFsdGVybmF0aXZlTGVhdmUpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZXJzLm9uQWx0ZXJuYXRpdmVMZWF2ZShub2RlKVxuICAgICAgICB9XG4gICAgfVxuICAgIHByaXZhdGUgdmlzaXRBc3NlcnRpb24obm9kZTogQXNzZXJ0aW9uKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLl9oYW5kbGVycy5vbkFzc2VydGlvbkVudGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVycy5vbkFzc2VydGlvbkVudGVyKG5vZGUpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUua2luZCA9PT0gXCJsb29rYWhlYWRcIiB8fCBub2RlLmtpbmQgPT09IFwibG9va2JlaGluZFwiKSB7XG4gICAgICAgICAgICBub2RlLmFsdGVybmF0aXZlcy5mb3JFYWNoKHRoaXMudmlzaXQsIHRoaXMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2hhbmRsZXJzLm9uQXNzZXJ0aW9uTGVhdmUpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZXJzLm9uQXNzZXJ0aW9uTGVhdmUobm9kZSlcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcml2YXRlIHZpc2l0QmFja3JlZmVyZW5jZShub2RlOiBCYWNrcmVmZXJlbmNlKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLl9oYW5kbGVycy5vbkJhY2tyZWZlcmVuY2VFbnRlcikge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlcnMub25CYWNrcmVmZXJlbmNlRW50ZXIobm9kZSlcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5faGFuZGxlcnMub25CYWNrcmVmZXJlbmNlTGVhdmUpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZXJzLm9uQmFja3JlZmVyZW5jZUxlYXZlKG5vZGUpXG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSB2aXNpdENhcHR1cmluZ0dyb3VwKG5vZGU6IENhcHR1cmluZ0dyb3VwKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLl9oYW5kbGVycy5vbkNhcHR1cmluZ0dyb3VwRW50ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZXJzLm9uQ2FwdHVyaW5nR3JvdXBFbnRlcihub2RlKVxuICAgICAgICB9XG4gICAgICAgIG5vZGUuYWx0ZXJuYXRpdmVzLmZvckVhY2godGhpcy52aXNpdCwgdGhpcylcbiAgICAgICAgaWYgKHRoaXMuX2hhbmRsZXJzLm9uQ2FwdHVyaW5nR3JvdXBMZWF2ZSkge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlcnMub25DYXB0dXJpbmdHcm91cExlYXZlKG5vZGUpXG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSB2aXNpdENoYXJhY3Rlcihub2RlOiBDaGFyYWN0ZXIpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhbmRsZXJzLm9uQ2hhcmFjdGVyRW50ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZXJzLm9uQ2hhcmFjdGVyRW50ZXIobm9kZSlcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5faGFuZGxlcnMub25DaGFyYWN0ZXJMZWF2ZSkge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlcnMub25DaGFyYWN0ZXJMZWF2ZShub2RlKVxuICAgICAgICB9XG4gICAgfVxuICAgIHByaXZhdGUgdmlzaXRDaGFyYWN0ZXJDbGFzcyhub2RlOiBDaGFyYWN0ZXJDbGFzcyk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5faGFuZGxlcnMub25DaGFyYWN0ZXJDbGFzc0VudGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVycy5vbkNoYXJhY3RlckNsYXNzRW50ZXIobm9kZSlcbiAgICAgICAgfVxuICAgICAgICBub2RlLmVsZW1lbnRzLmZvckVhY2godGhpcy52aXNpdCwgdGhpcylcbiAgICAgICAgaWYgKHRoaXMuX2hhbmRsZXJzLm9uQ2hhcmFjdGVyQ2xhc3NMZWF2ZSkge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlcnMub25DaGFyYWN0ZXJDbGFzc0xlYXZlKG5vZGUpXG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSB2aXNpdENoYXJhY3RlckNsYXNzUmFuZ2Uobm9kZTogQ2hhcmFjdGVyQ2xhc3NSYW5nZSk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5faGFuZGxlcnMub25DaGFyYWN0ZXJDbGFzc1JhbmdlRW50ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZXJzLm9uQ2hhcmFjdGVyQ2xhc3NSYW5nZUVudGVyKG5vZGUpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52aXNpdENoYXJhY3Rlcihub2RlLm1pbilcbiAgICAgICAgdGhpcy52aXNpdENoYXJhY3Rlcihub2RlLm1heClcbiAgICAgICAgaWYgKHRoaXMuX2hhbmRsZXJzLm9uQ2hhcmFjdGVyQ2xhc3NSYW5nZUxlYXZlKSB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVycy5vbkNoYXJhY3RlckNsYXNzUmFuZ2VMZWF2ZShub2RlKVxuICAgICAgICB9XG4gICAgfVxuICAgIHByaXZhdGUgdmlzaXRDaGFyYWN0ZXJTZXQobm9kZTogQ2hhcmFjdGVyU2V0KTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLl9oYW5kbGVycy5vbkNoYXJhY3RlclNldEVudGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVycy5vbkNoYXJhY3RlclNldEVudGVyKG5vZGUpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2hhbmRsZXJzLm9uQ2hhcmFjdGVyU2V0TGVhdmUpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZXJzLm9uQ2hhcmFjdGVyU2V0TGVhdmUobm9kZSlcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcml2YXRlIHZpc2l0RmxhZ3Mobm9kZTogRmxhZ3MpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhbmRsZXJzLm9uRmxhZ3NFbnRlcikge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlcnMub25GbGFnc0VudGVyKG5vZGUpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2hhbmRsZXJzLm9uRmxhZ3NMZWF2ZSkge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlcnMub25GbGFnc0xlYXZlKG5vZGUpXG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSB2aXNpdEdyb3VwKG5vZGU6IEdyb3VwKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLl9oYW5kbGVycy5vbkdyb3VwRW50ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZXJzLm9uR3JvdXBFbnRlcihub2RlKVxuICAgICAgICB9XG4gICAgICAgIG5vZGUuYWx0ZXJuYXRpdmVzLmZvckVhY2godGhpcy52aXNpdCwgdGhpcylcbiAgICAgICAgaWYgKHRoaXMuX2hhbmRsZXJzLm9uR3JvdXBMZWF2ZSkge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlcnMub25Hcm91cExlYXZlKG5vZGUpXG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSB2aXNpdFBhdHRlcm4obm9kZTogUGF0dGVybik6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5faGFuZGxlcnMub25QYXR0ZXJuRW50ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZXJzLm9uUGF0dGVybkVudGVyKG5vZGUpXG4gICAgICAgIH1cbiAgICAgICAgbm9kZS5hbHRlcm5hdGl2ZXMuZm9yRWFjaCh0aGlzLnZpc2l0LCB0aGlzKVxuICAgICAgICBpZiAodGhpcy5faGFuZGxlcnMub25QYXR0ZXJuTGVhdmUpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZXJzLm9uUGF0dGVybkxlYXZlKG5vZGUpXG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSB2aXNpdFF1YW50aWZpZXIobm9kZTogUXVhbnRpZmllcik6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5faGFuZGxlcnMub25RdWFudGlmaWVyRW50ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZXJzLm9uUXVhbnRpZmllckVudGVyKG5vZGUpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52aXNpdChub2RlLmVsZW1lbnQpXG4gICAgICAgIGlmICh0aGlzLl9oYW5kbGVycy5vblF1YW50aWZpZXJMZWF2ZSkge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlcnMub25RdWFudGlmaWVyTGVhdmUobm9kZSlcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcml2YXRlIHZpc2l0UmVnRXhwTGl0ZXJhbChub2RlOiBSZWdFeHBMaXRlcmFsKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLl9oYW5kbGVycy5vblJlZ0V4cExpdGVyYWxFbnRlcikge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlcnMub25SZWdFeHBMaXRlcmFsRW50ZXIobm9kZSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZpc2l0UGF0dGVybihub2RlLnBhdHRlcm4pXG4gICAgICAgIHRoaXMudmlzaXRGbGFncyhub2RlLmZsYWdzKVxuICAgICAgICBpZiAodGhpcy5faGFuZGxlcnMub25SZWdFeHBMaXRlcmFsTGVhdmUpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZXJzLm9uUmVnRXhwTGl0ZXJhbExlYXZlKG5vZGUpXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgUmVnRXhwVmlzaXRvciB7XG4gICAgZXhwb3J0IGludGVyZmFjZSBIYW5kbGVycyB7XG4gICAgICAgIG9uQWx0ZXJuYXRpdmVFbnRlcj8obm9kZTogQWx0ZXJuYXRpdmUpOiB2b2lkXG4gICAgICAgIG9uQWx0ZXJuYXRpdmVMZWF2ZT8obm9kZTogQWx0ZXJuYXRpdmUpOiB2b2lkXG4gICAgICAgIG9uQXNzZXJ0aW9uRW50ZXI/KG5vZGU6IEFzc2VydGlvbik6IHZvaWRcbiAgICAgICAgb25Bc3NlcnRpb25MZWF2ZT8obm9kZTogQXNzZXJ0aW9uKTogdm9pZFxuICAgICAgICBvbkJhY2tyZWZlcmVuY2VFbnRlcj8obm9kZTogQmFja3JlZmVyZW5jZSk6IHZvaWRcbiAgICAgICAgb25CYWNrcmVmZXJlbmNlTGVhdmU/KG5vZGU6IEJhY2tyZWZlcmVuY2UpOiB2b2lkXG4gICAgICAgIG9uQ2FwdHVyaW5nR3JvdXBFbnRlcj8obm9kZTogQ2FwdHVyaW5nR3JvdXApOiB2b2lkXG4gICAgICAgIG9uQ2FwdHVyaW5nR3JvdXBMZWF2ZT8obm9kZTogQ2FwdHVyaW5nR3JvdXApOiB2b2lkXG4gICAgICAgIG9uQ2hhcmFjdGVyRW50ZXI/KG5vZGU6IENoYXJhY3Rlcik6IHZvaWRcbiAgICAgICAgb25DaGFyYWN0ZXJMZWF2ZT8obm9kZTogQ2hhcmFjdGVyKTogdm9pZFxuICAgICAgICBvbkNoYXJhY3RlckNsYXNzRW50ZXI/KG5vZGU6IENoYXJhY3RlckNsYXNzKTogdm9pZFxuICAgICAgICBvbkNoYXJhY3RlckNsYXNzTGVhdmU/KG5vZGU6IENoYXJhY3RlckNsYXNzKTogdm9pZFxuICAgICAgICBvbkNoYXJhY3RlckNsYXNzUmFuZ2VFbnRlcj8obm9kZTogQ2hhcmFjdGVyQ2xhc3NSYW5nZSk6IHZvaWRcbiAgICAgICAgb25DaGFyYWN0ZXJDbGFzc1JhbmdlTGVhdmU/KG5vZGU6IENoYXJhY3RlckNsYXNzUmFuZ2UpOiB2b2lkXG4gICAgICAgIG9uQ2hhcmFjdGVyU2V0RW50ZXI/KG5vZGU6IENoYXJhY3RlclNldCk6IHZvaWRcbiAgICAgICAgb25DaGFyYWN0ZXJTZXRMZWF2ZT8obm9kZTogQ2hhcmFjdGVyU2V0KTogdm9pZFxuICAgICAgICBvbkZsYWdzRW50ZXI/KG5vZGU6IEZsYWdzKTogdm9pZFxuICAgICAgICBvbkZsYWdzTGVhdmU/KG5vZGU6IEZsYWdzKTogdm9pZFxuICAgICAgICBvbkdyb3VwRW50ZXI/KG5vZGU6IEdyb3VwKTogdm9pZFxuICAgICAgICBvbkdyb3VwTGVhdmU/KG5vZGU6IEdyb3VwKTogdm9pZFxuICAgICAgICBvblBhdHRlcm5FbnRlcj8obm9kZTogUGF0dGVybik6IHZvaWRcbiAgICAgICAgb25QYXR0ZXJuTGVhdmU/KG5vZGU6IFBhdHRlcm4pOiB2b2lkXG4gICAgICAgIG9uUXVhbnRpZmllckVudGVyPyhub2RlOiBRdWFudGlmaWVyKTogdm9pZFxuICAgICAgICBvblF1YW50aWZpZXJMZWF2ZT8obm9kZTogUXVhbnRpZmllcik6IHZvaWRcbiAgICAgICAgb25SZWdFeHBMaXRlcmFsRW50ZXI/KG5vZGU6IFJlZ0V4cExpdGVyYWwpOiB2b2lkXG4gICAgICAgIG9uUmVnRXhwTGl0ZXJhbExlYXZlPyhub2RlOiBSZWdFeHBMaXRlcmFsKTogdm9pZFxuICAgIH1cbn1cbiJdfQ==