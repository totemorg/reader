"use strict";
/**
 * Created by user on 2018/5/6/006.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const property_data_1 = require("../cache/property-data");
const index_1 = require("../../util/index");
const index_2 = require("./index");
const scripts_1 = require("../cache/scripts");
exports.KEY_PREFIX = '\\p{Script=';
exports.KEY_PREFIX_NEGATION = '\\P{Script=';
exports.KEY_SUFFIX = '}';
/**
 * @link http://2ality.com/2017/07/regexp-unicode-property-escapes.html
 * @link https://en.wikipedia.org/wiki/Unicode_character_property
 */
exports.UNICODE_SCRIPTS = {
    Greek: false,
    Latin: false,
    Katakana: false,
    Hiragana: false,
    Han: false,
    Hangul: false,
};
exports.UNICODE_SCRIPTS_ALL = {
    ...scripts_1.default,
    ...property_data_1.default.Script,
    ...exports.UNICODE_SCRIPTS,
};
var UNICODE_SCRIPTS_NAME_ALIAS;
(function (UNICODE_SCRIPTS_NAME_ALIAS) {
    UNICODE_SCRIPTS_NAME_ALIAS["Arabic"] = "Arab";
    UNICODE_SCRIPTS_NAME_ALIAS["Bengali"] = "Beng";
    UNICODE_SCRIPTS_NAME_ALIAS["Coptic"] = "Copt";
    UNICODE_SCRIPTS_NAME_ALIAS["Cyrillic"] = "Cyrl";
    UNICODE_SCRIPTS_NAME_ALIAS["Ethiopic"] = "Ethi";
    UNICODE_SCRIPTS_NAME_ALIAS["Georgian"] = "Geor";
    UNICODE_SCRIPTS_NAME_ALIAS["Greek"] = "Grek";
    UNICODE_SCRIPTS_NAME_ALIAS["Han"] = "Hani";
    UNICODE_SCRIPTS_NAME_ALIAS["Katakana"] = "Kana";
    UNICODE_SCRIPTS_NAME_ALIAS["Hiragana"] = "Hira";
    UNICODE_SCRIPTS_NAME_ALIAS["Latin"] = "Latn";
    UNICODE_SCRIPTS_NAME_ALIAS["Tamil"] = "Taml";
    UNICODE_SCRIPTS_NAME_ALIAS["Tibetan"] = "Tibt";
})(UNICODE_SCRIPTS_NAME_ALIAS = exports.UNICODE_SCRIPTS_NAME_ALIAS || (exports.UNICODE_SCRIPTS_NAME_ALIAS = {}));
Object.keys(UNICODE_SCRIPTS_NAME_ALIAS)
    .forEach(function (key) {
    let k2 = UNICODE_SCRIPTS_NAME_ALIAS[key];
    if (k2 && !UNICODE_SCRIPTS_NAME_ALIAS[k2]) {
        // @ts-ignore
        UNICODE_SCRIPTS_NAME_ALIAS[k2] = key;
    }
});
exports.PatternTest = {
    Greek: [
        ['^\\p{Script=Greek}+$', 'u', 'μετά', true, 'test'],
    ],
    Latin: [
        ['^\\p{Script=Latin}+$', 'u', 'Grüße', true, 'test'],
        ['^\\p{Script=Latin}+$', 'u', 'façon', true, 'test'],
        ['^\\p{Script=Latin}+$', 'u', 'mañana', true, 'test'],
    ],
    Katakana: [
        ['^\\p{Script=Katakana}+$', 'u', 'カタカナ', true, 'test'],
    ],
    Hiragana: [
        ['^\\p{Script=Hiragana}+$', 'u', 'ひらがな', true, 'test'],
    ],
    Han: [
        ['^\\p{Script=Han}+$', 'u', 'カタカナ', false, 'test'],
        ['^\\p{Script=Han}+$', 'u', '可以知道', true, 'test'],
    ],
    Hangul: [
        ['^\\p{Script=Hangul}+$', 'u', '\u1190', true, 'test'],
    ],
    Common: [
        ['^\\p{Script=Common}+$', 'u', '!', true, 'test'],
    ],
    Arabic: [
        ['^\\p{Script=Arabic}+$', 'u', 'لمو', true, 'test'],
    ],
    Bengali: [
        ['^\\p{Script=Bengali}+$', 'u', 'আমার', true, 'test'],
    ],
    Cyrillic: [
        ['^\\p{Script=Cyrillic}+$', 'u', 'летачко', true, 'test'],
    ],
    Ethiopic: [
        ['^\\p{Script=Ethiopic}+$', 'u', 'ማንዣበቢያ', true, 'test'],
    ],
    Georgian: [
        ['^\\p{Script=Georgian}+$', 'u', 'ხომალდი', true, 'test'],
    ],
    Coptic: [
        ['^\\p{Script=Coptic}+$', 'u', 'Ϫ', true, 'test'],
        ['^\\p{Script=Coptic}+$', 'u', '\u03ea', true, 'test'],
    ],
    Tamil: [
        ['^\\p{Script=Tamil}+$', 'u', '்', true, 'test'],
        ['^\\p{Script=Tamil}+$', 'u', '\u0bcd', true, 'test'],
    ],
    Tibetan: [
        ['^\\p{Script=Tibetan}+$', 'u', '༬', true, 'test'],
        ['^\\p{Script=Tibetan}+$', 'u', '\u0f2c', true, 'test'],
    ],
};
exports._testUnicodeScript = index_1._createFnTestPattern(exports.PatternTest);
function testUnicodeScript(name, RegExpClass, testPatterns = exports.PatternTest) {
    if (!exports.PatternTest.hasOwnProperty(name) && UNICODE_SCRIPTS_NAME_ALIAS[name] && exports.PatternTest.hasOwnProperty(UNICODE_SCRIPTS_NAME_ALIAS[name])) {
        name = UNICODE_SCRIPTS_NAME_ALIAS[name];
    }
    return exports._testUnicodeScript(name, RegExpClass, testPatterns);
}
exports.testUnicodeScript = testUnicodeScript;
// @ts-ignore
function testUnicodeScriptAll(RegExpClass = RegExp, testPatterns = exports.PatternTest) {
    return Object.keys(exports.UNICODE_SCRIPTS_ALL).reduce(function (a, key) {
        a[key] = testUnicodeScript(key, RegExpClass, testPatterns);
        return a;
    }, {});
}
exports.testUnicodeScriptAll = testUnicodeScriptAll;
function wrapToRegexName(name, negation) {
    let prefix = exports.KEY_PREFIX;
    if (negation) {
        prefix = exports.KEY_PREFIX_NEGATION;
    }
    return index_2._wrapToRegexName(name, prefix, exports.KEY_SUFFIX);
}
exports.wrapToRegexName = wrapToRegexName;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidW5pY29kZS1zY3JpcHQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ1bmljb2RlLXNjcmlwdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7O0FBRUgsMERBQXlEO0FBR3pELDRDQUFpRTtBQUNqRSxtQ0FBMkM7QUFLM0MsOENBQTZDO0FBRWhDLFFBQUEsVUFBVSxHQUFHLGFBQWEsQ0FBQztBQUMzQixRQUFBLG1CQUFtQixHQUFHLGFBQWEsQ0FBQztBQUNwQyxRQUFBLFVBQVUsR0FBRyxHQUFHLENBQUM7QUFFOUI7OztHQUdHO0FBQ1UsUUFBQSxlQUFlLEdBQUc7SUFFOUIsS0FBSyxFQUFFLEtBQUs7SUFDWixLQUFLLEVBQUUsS0FBSztJQUVaLFFBQVEsRUFBRSxLQUFLO0lBQ2YsUUFBUSxFQUFFLEtBQUs7SUFFZixHQUFHLEVBQUUsS0FBSztJQUNWLE1BQU0sRUFBRSxLQUFLO0NBRWIsQ0FBQztBQUVXLFFBQUEsbUJBQW1CLEdBQUc7SUFDbEMsR0FBRyxpQkFBYTtJQUVoQixHQUFHLHVCQUFtQixDQUFDLE1BQU07SUFFN0IsR0FBRyx1QkFBZTtDQUNsQixDQUFDO0FBRUYsSUFBWSwwQkFvQlg7QUFwQkQsV0FBWSwwQkFBMEI7SUFFckMsNkNBQWUsQ0FBQTtJQUNmLDhDQUFnQixDQUFBO0lBQ2hCLDZDQUFlLENBQUE7SUFDZiwrQ0FBaUIsQ0FBQTtJQUVqQiwrQ0FBaUIsQ0FBQTtJQUNqQiwrQ0FBaUIsQ0FBQTtJQUNqQiw0Q0FBYyxDQUFBO0lBQ2QsMENBQVksQ0FBQTtJQUVaLCtDQUFpQixDQUFBO0lBQ2pCLCtDQUFpQixDQUFBO0lBR2pCLDRDQUFjLENBQUE7SUFDZCw0Q0FBYyxDQUFBO0lBQ2QsOENBQWdCLENBQUE7QUFFakIsQ0FBQyxFQXBCVywwQkFBMEIsR0FBMUIsa0NBQTBCLEtBQTFCLGtDQUEwQixRQW9CckM7QUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLDBCQUEwQixDQUFDO0tBQ3JDLE9BQU8sQ0FBQyxVQUFV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Q0FVQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSB1c2VyIG9uIDIwMTgvNS82LzAwNi5cbiAqL1xuXG5pbXBvcnQgQ0FDSEVfUFJPUEVSVFlfREFUQSBmcm9tICcuLi9jYWNoZS9wcm9wZXJ0eS1kYXRhJztcbmltcG9ydCB7IElDcmVhdGVSZWdFeHAsIElUeXBlQ3JlYXRlUmVnRXhwIH0gZnJvbSAnLi4vLi4vaW5kZXgnO1xuaW1wb3J0IHsgSVBhdHRlcm5UZXN0Rm4sIElQYXR0ZXJuVGVzdFJvdywgUGF0dGVyblN1cHBvcnQsIHRlc3RQYXR0ZXJuIH0gZnJvbSAnLi4vLi4vcGF0dGVybic7XG5pbXBvcnQgeyBfY3JlYXRlRm5UZXN0UGF0dGVybiwgbG9nX2RpciB9IGZyb20gJy4uLy4uL3V0aWwvaW5kZXgnO1xuaW1wb3J0IHsgX3dyYXBUb1JlZ2V4TmFtZSB9IGZyb20gJy4vaW5kZXgnO1xuXG5pbXBvcnQgQ0FDSEVfQkxPQ0tTIGZyb20gJy4uL2NhY2hlL2Jsb2Nrcyc7XG5pbXBvcnQgQ0FDSEVfQ0FURUdPUklFUyBmcm9tICcuLi9jYWNoZS9jYXRlZ29yaWVzJztcbmltcG9ydCBDQUNIRV9QUk9QRVJUSUVTIGZyb20gJy4uL2NhY2hlL3Byb3BlcnRpZXMnO1xuaW1wb3J0IENBQ0hFX1NDUklQVFMgZnJvbSAnLi4vY2FjaGUvc2NyaXB0cyc7XG5cbmV4cG9ydCBjb25zdCBLRVlfUFJFRklYID0gJ1xcXFxwe1NjcmlwdD0nO1xuZXhwb3J0IGNvbnN0IEtFWV9QUkVGSVhfTkVHQVRJT04gPSAnXFxcXFB7U2NyaXB0PSc7XG5leHBvcnQgY29uc3QgS0VZX1NVRkZJWCA9ICd9JztcblxuLyoqXG4gKiBAbGluayBodHRwOi8vMmFsaXR5LmNvbS8yMDE3LzA3L3JlZ2V4cC11bmljb2RlLXByb3BlcnR5LWVzY2FwZXMuaHRtbFxuICogQGxpbmsgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVW5pY29kZV9jaGFyYWN0ZXJfcHJvcGVydHlcbiAqL1xuZXhwb3J0IGNvbnN0IFVOSUNPREVfU0NSSVBUUyA9IHtcblxuXHRHcmVlazogZmFsc2UsXG5cdExhdGluOiBmYWxzZSxcblxuXHRLYXRha2FuYTogZmFsc2UsXG5cdEhpcmFnYW5hOiBmYWxzZSxcblxuXHRIYW46IGZhbHNlLFxuXHRIYW5ndWw6IGZhbHNlLFxuXG59O1xuXG5leHBvcnQgY29uc3QgVU5JQ09ERV9TQ1JJUFRTX0FMTCA9IHtcblx0Li4uQ0FDSEVfU0NSSVBUUyxcblxuXHQuLi5DQUNIRV9QUk9QRVJUWV9EQVRBLlNjcmlwdCxcblxuXHQuLi5VTklDT0RFX1NDUklQVFMsXG59O1xuXG5leHBvcnQgZW51bSBVTklDT0RFX1NDUklQVFNfTkFNRV9BTElBU1xue1xuXHRBcmFiaWMgPSAnQXJhYicsXG5cdEJlbmdhbGkgPSAnQmVuZycsXG5cdENvcHRpYyA9ICdDb3B0Jyxcblx0Q3lyaWxsaWMgPSAnQ3lybCcsXG5cblx0RXRoaW9waWMgPSAnRXRoaScsXG5cdEdlb3JnaWFuID0gJ0dlb3InLFxuXHRHcmVlayA9ICdHcmVrJyxcblx0SGFuID0gJ0hhbmknLFxuXG5cdEthdGFrYW5hID0gJ0thbmEnLFxuXHRIaXJhZ2FuYSA9ICdIaXJhJyxcblxuXG5cdExhdGluID0gJ0xhdG4nLFxuXHRUYW1pbCA9ICdUYW1sJyxcblx0VGliZXRhbiA9ICdUaWJ0JyxcblxufVxuXG5PYmplY3Qua2V5cyhVTklDT0RFX1NDUklQVFNfTkFNRV9BTElBUylcblx0LmZvckVhY2goZnVuY3Rpb24gKGtleSlcblx0e1xuXHRcdGxldCBrMiA9IFVOSUNPREVfU0NSSVBUU19OQU1FX0FMSUFTW2tleV07XG5cblx0XHRpZiAoazIgJiYgIVVOSUNPREVfU0NSSVBUU19OQU1FX0FMSUFTW2syXSlcblx0XHR7XG5cdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRVTklDT0RFX1NDUklQVFNfTkFNRV9BTElBU1trMl0gPSBrZXk7XG5cdFx0fVxuXHR9KVxuO1xuXG5leHBvcnQgY29uc3QgUGF0dGVyblRlc3Q6IHtcblx0W2sgaW4ga2V5b2YgdHlwZW9mIFVOSUNPREVfU0NSSVBUU19BTExdPzogSVBhdHRlcm5UZXN0Um93W107XG59ID0ge1xuXG5cdEdyZWVrOiBbXG5cdFx0WydeXFxcXHB7U2NyaXB0PUdyZWVrfSskJywgJ3UnLCAnzrzOtc+EzqwnLCB0cnVlLCAndGVzdCddLFxuXHRdLFxuXG5cdExhdGluOiBbXG5cdFx0WydeXFxcXHB7U2NyaXB0PUxhdGlufSskJywgJ3UnLCAnR3LDvMOfZScsIHRydWUsICd0ZXN0J10sXG5cdFx0WydeXFxcXHB7U2NyaXB0PUxhdGlufSskJywgJ3UnLCAnZmHDp29uJywgdHJ1ZSwgJ3Rlc3QnXSxcblx0XHRbJ15cXFxccHtTY3JpcHQ9TGF0aW59KyQnLCAndScsICdtYcOxYW5hJywgdHJ1ZSwgJ3Rlc3QnXSxcblx0XSxcblxuXHRLYXRha2FuYTogW1xuXHRcdFsnXlxcXFxwe1NjcmlwdD1LYXRha2FuYX0rJCcsICd1JywgJ+OCq+OCv+OCq+ODiicsIHRydWUsICd0ZXN0J10sXG5cdF0sXG5cblx0SGlyYWdhbmE6IFtcblx0XHRbJ15cXFxccHtTY3JpcHQ9SGlyYWdhbmF9KyQnLCAndScsICfjgbLjgonjgYzjgaonLCB0cnVlLCAndGVzdCddLFxuXHRdLFxuXG5cdEhhbjogW1xuXHRcdFsnXlxcXFxwe1NjcmlwdD1IYW59KyQnLCAndScsICfjgqvjgr/jgqvjg4onLCBmYWxzZSwgJ3Rlc3QnXSxcblx0XHRbJ15cXFxccHtTY3JpcHQ9SGFufSskJywgJ3UnLCAn5Y+v5Lul55+l6YGTJywgdHJ1ZSwgJ3Rlc3QnXSxcblx0XSxcblxuXHRIYW5ndWw6IFtcblx0XHRbJ15cXFxccHtTY3JpcHQ9SGFuZ3VsfSskJywgJ3UnLCAnXFx1MTE5MCcsIHRydWUsICd0ZXN0J10sXG5cdF0sXG5cblx0Q29tbW9uOiBbXG5cdFx0WydeXFxcXHB7U2NyaXB0PUNvbW1vbn0rJCcsICd1JywgJyEnLCB0cnVlLCAndGVzdCddLFxuXHRdLFxuXG5cdEFyYWJpYzogW1xuXHRcdFsnXlxcXFxwe1NjcmlwdD1BcmFiaWN9KyQnLCAndScsICfZhNmF2YgnLCB0cnVlLCAndGVzdCddLFxuXHRdLFxuXG5cdEJlbmdhbGk6IFtcblx0XHRbJ15cXFxccHtTY3JpcHQ9QmVuZ2FsaX0rJCcsICd1JywgJ+CmhuCmruCmvuCmsCcsIHRydWUsICd0ZXN0J10sXG5cdF0sXG5cdEN5cmlsbGljOiBbXG5cdFx0WydeXFxcXHB7U2NyaXB0PUN5cmlsbGljfSskJywgJ3UnLCAn0LvQtdGC0LDRh9C60L4nLCB0cnVlLCAndGVzdCddLFxuXHRdLFxuXHRFdGhpb3BpYzogW1xuXHRcdFsnXlxcXFxwe1NjcmlwdD1FdGhpb3BpY30rJCcsICd1JywgJ+GIm+GKleGLo+GJoOGJouGLqycsIHRydWUsICd0ZXN0J10sXG5cdF0sXG5cdEdlb3JnaWFuOiBbXG5cdFx0WydeXFxcXHB7U2NyaXB0PUdlb3JnaWFufSskJywgJ3UnLCAn4YOu4YOd4YOb4YOQ4YOa4YOT4YOYJywgdHJ1ZSwgJ3Rlc3QnXSxcblx0XSxcblxuXHRDb3B0aWM6IFtcblx0XHRbJ15cXFxccHtTY3JpcHQ9Q29wdGljfSskJywgJ3UnLCAnz6onLCB0cnVlLCAndGVzdCddLFxuXHRcdFsnXlxcXFxwe1NjcmlwdD1Db3B0aWN9KyQnLCAndScsICdcXHUwM2VhJywgdHJ1ZSwgJ3Rlc3QnXSxcblx0XSxcblxuXHRUYW1pbDogW1xuXHRcdFsnXlxcXFxwe1NjcmlwdD1UYW1pbH0rJCcsICd1JywgJ+CvjScsIHRydWUsICd0ZXN0J10sXG5cdFx0WydeXFxcXHB7U2NyaXB0PVRhbWlsfSskJywgJ3UnLCAnXFx1MGJjZCcsIHRydWUsICd0ZXN0J10sXG5cdF0sXG5cblx0VGliZXRhbjogW1xuXHRcdFsnXlxcXFxwe1NjcmlwdD1UaWJldGFufSskJywgJ3UnLCAn4LysJywgdHJ1ZSwgJ3Rlc3QnXSxcblx0XHRbJ15cXFxccHtTY3JpcHQ9VGliZXRhbn0rJCcsICd1JywgJ1xcdTBmMmMnLCB0cnVlLCAndGVzdCddLFxuXHRdLFxuXG59O1xuXG5leHBvcnQgY29uc3QgX3Rlc3RVbmljb2RlU2NyaXB0ID0gX2NyZWF0ZUZuVGVzdFBhdHRlcm4oUGF0dGVyblRlc3QpO1xuXG5leHBvcnQgZnVuY3Rpb24gdGVzdFVuaWNvZGVTY3JpcHQ8VD4obmFtZTogc3RyaW5nLCBSZWdFeHBDbGFzcz86IElUeXBlQ3JlYXRlUmVnRXhwPFQ+LCB0ZXN0UGF0dGVybnM6IHR5cGVvZiBQYXR0ZXJuVGVzdCA9IFBhdHRlcm5UZXN0KTogYm9vbGVhblxue1xuXHRpZiAoIVBhdHRlcm5UZXN0Lmhhc093blByb3BlcnR5KG5hbWUpICYmIFVOSUNPREVfU0NSSVBUU19OQU1FX0FMSUFTW25hbWVdICYmIFBhdHRlcm5UZXN0Lmhhc093blByb3BlcnR5KFVOSUNPREVfU0NSSVBUU19OQU1FX0FMSUFTW25hbWVdKSlcblx0e1xuXHRcdG5hbWUgPSBVTklDT0RFX1NDUklQVFNfTkFNRV9BTElBU1tuYW1lXTtcblx0fVxuXG5cdHJldHVybiBfdGVzdFVuaWNvZGVTY3JpcHQobmFtZSwgUmVnRXhwQ2xhc3MsIHRlc3RQYXR0ZXJucyk7XG59XG5cbi8vIEB0cy1pZ25vcmVcbmV4cG9ydCBmdW5jdGlvbiB0ZXN0VW5pY29kZVNjcmlwdEFsbDxUPihSZWdFeHBDbGFzczogSVR5cGVDcmVhdGVSZWdFeHA8VD4gPSBSZWdFeHAsIHRlc3RQYXR0ZXJucyA9IFBhdHRlcm5UZXN0KVxue1xuXHRyZXR1cm4gT2JqZWN0LmtleXMoVU5JQ09ERV9TQ1JJUFRTX0FMTCkucmVkdWNlKGZ1bmN0aW9uIChhLCBrZXkpXG5cdHtcblx0XHRhW2tleV0gPSB0ZXN0VW5pY29kZVNjcmlwdChrZXksIFJlZ0V4cENsYXNzLCB0ZXN0UGF0dGVybnMpO1xuXHRcdHJldHVybiBhO1xuXHR9LCB7fSBhcyB0eXBlb2YgVU5JQ09ERV9TQ1JJUFRTX0FMTCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3cmFwVG9SZWdleE5hbWUobmFtZTogc3RyaW5nLCBuZWdhdGlvbj86IGJvb2xlYW4pXG57XG5cdGxldCBwcmVmaXggPSBLRVlfUFJFRklYO1xuXG5cdGlmIChuZWdhdGlvbilcblx0e1xuXHRcdHByZWZpeCA9IEtFWV9QUkVGSVhfTkVHQVRJT047XG5cdH1cblxuXHRyZXR1cm4gX3dyYXBUb1JlZ2V4TmFtZShuYW1lLCBwcmVmaXgsIEtFWV9TVUZGSVgpO1xufVxuIl19